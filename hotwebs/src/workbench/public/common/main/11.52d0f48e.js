(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1001:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=E(a(2)),o=E(a(35)),r=E(a(13)),l=E(a(4)),s=E(a(7)),i=E(a(3)),d=E(a(5)),c=E(a(199)),p=E(a(136)),u=E(a(75));a(198),a(194),a(109);var f=a(1),m=E(f),h=E(a(0)),g=a(28),T=E(a(90)),y=E(a(26)),k=a(18),v=E(a(54)),C=E(a(957)),b=a(922),D=a(975),w=a(1002),x=E(a(419));function E(e){return e&&e.__esModule?e:{default:e}}a(1003);var S=E(a(32)).default.base,N=S.NCDiv,P=S.NCButton,M=S.NCTree,R=u.default.Option,A=M.NCTreeNode,K=p.default.Search,_=c.default.TabPane,j=["abc1234567","abc2234567","abc3334567"],V=function(e){function t(e){(0,l.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.reqAllowTreeData=function(){var e=a.state,t=e.orgidObj,n=e.nodeKeyValue,o=a.props,r=o.templatePk,l=o.pageCode,s=o.appCode,i=o.def1,d=o.json,c={pageCode:l,orgId:t.refpk,templateId:r,appCode:s};"apppage"===i?c.templateType="bill":"menuitem"===i&&(c.templateType="print",c.pageCode&&delete c.pageCode,c.pageCode=n),a.props.mobileInfoData&&(c=a.props.mobileInfoData),(0,y.default)({url:"/nccloud/platform/template/listAssignmentsOfTemplate.do",info:{name:d["10180TM-000002"],action:d["10180TM-000003"]},data:c,success:function(e){var t=e.data;t.success&&a.setState({allowDataArray:t.data},a.restoreAllowedTree)}})},a.restoreAllowedTree=function(){var e=a.state,t=e.allowDataArray,n=e.treeAllowedData;t.map(function(e){e.text=e.code+"  "+e.name,e.key=e.id}),n=(0,D.generateTreeData)(t),a.setState({treeAllowedData:n})},a.reqRoTreeData=function(){var e=a.state.orgidObj,t=a.props.json;if(e.refpk){var n={orgId:e.refpk};(0,y.default)({url:"/nccloud/platform/template/getAllRoleUserAndResp.do",info:{name:(0,k.langCheck)("10180TM-000004","pages",t),action:(0,k.langCheck)("10180TM-000005","pages",t)},data:n,success:function(e){var t=e.data;t.success&&t.data&&((t.data.roles||t.data.users||t.data.resps)&&(a.restoreRoTreeData(t.data),a.restoreResTreeData(t.data.resps)),a.props.setRoleUserDatas(t.data),a.reqAllowTreeData())}})}},a.restoreResTreeData=function(e){var t=a.state.treeResData,n=a.props.json;t=[],w.initAbiTreeData.text=(0,k.langCheck)("10180TM-000006","pages",n),w.initAbiTreeData2.text=(0,k.langCheck)("10180TM-000006","pages",n);var o=w.initAbiTreeData;e.map(function(e){var t=e.code,a=e.name;e.text=t+"  "+a,e.type="resp"}),o.children=e,t.push(o),t=(0,D.generateTreeData)(t),a.setState({treeResData:t})},a.restoreRoTreeData=function(e){var t=a.state.treeRoData,n=a.props.json;t=[],w.initRoTreeData.text=(0,k.langCheck)("10180TM-000007","pages",n),w.initUserTreeData.text=(0,k.langCheck)("10180TM-000008","pages",n),w.initRoTreeData2.text=(0,k.langCheck)("10180TM-000007","pages",n),w.initUserTreeData2.text=(0,k.langCheck)("10180TM-000008","pages",n);var o=w.initRoTreeData,r=w.initUserTreeData;e.roles.map(function(e){e.type="roles"}),e.users.map(function(e){e.type="users"}),o.children=(0,D.generateRoData)(e.roles),r.children=(0,D.generateRoData)(e.users),t.push(o),t.push(r),t=(0,D.generateTreeData)(t),a.setState({treeRoData:t})},a.selectRoFun=function(e){var t=a.state.roCheckedKeys,n=e.node.props.refData.id,r=t.indexOf(n);r>-1?t.splice(r,1):t.push(n),a.setState({roCheckedKeys:[].concat((0,o.default)(t))},a.lookCheckDataFun)},a.arrayUnique=function(e){for(var t=[],a=0,n=e.length;a<n;a++){for(var o=a+1;o<n;o++)e[a].id==e[o].id&&++a;t.push(e[a])}return t},a.allowClick=function(e){var t=a.state,n=t.allowDataArray,o=t.treeAllowedData,r=t.allowedCheckedKeys,l=a.props,s=l.roCheckedObjArray,i=l.json;switch(e){case"allowRole":if(s&&0===s.length)return void(0,v.default)({status:"warning",msg:(0,k.langCheck)("10180TM-000009","pages",i)});n=n.concat(s),n=a.arrayUnique(n),o=(0,D.generateTreeData)(n);break;case"allowRoleCancel":if(r&&0===r.length)return void(0,v.default)({status:"warning",msg:(0,k.langCheck)("10180TM-000009","pages",i)});Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)};for(var d=r.length-1;d>=0;d--)for(var c=0;c<n.length;c++)r[d]&&n[c].id===r[d]&&n.remove(n[c]);o=(0,D.generateTreeData)(n)}a.setState({treeAllowedData:o,allowDataArray:n,allowedCheckedKeys:r})},a.onSelectedAllow=function(e){var t=a.state.allowedCheckedKeys,n=e.node.props.refData.id,r=t.indexOf(n);r>-1?t.splice(r,1):t.push(n),a.setState({allowedCheckedKeys:[].concat((0,o.default)(t))})},a.onSelect=function(e,t){switch(e){case"resOnselect":a.selectRoFun(t);break;case"allowedOnselect":a.onSelectedAllow(t)}},a.hanldeDoubleClick=function(e,t){var n=void 0,o=[];switch(e){case"resOnselect":n=t.props.refData.key,o=a.state.expandedKeys.concat([n]),a.setState({expandedKeys:o})}},a.onExpand=function(e){a.setState({expandedKeys:e,autoExpandParent:!1})},a.onSearch=function(e){var t=e.target.value,n=a.state.tabActiveKey,o=a.props.roleUserDatas,r=[],l=[],s=[];if("1"===n)if(t){for(var i in o)o.hasOwnProperty(i)&&("users"!==i&&"roles"!==i||o[i].map(function(e){e.text=e.code+"  "+e.name,e.text.indexOf(t)>-1&&(r.push(e.key),l.push(e))}));l.map(function(e){e.key=e.id});var d=T.default.cloneDeep(w.initRoTreeData2),c=T.default.cloneDeep(w.initUserTreeData2);l.map(function(e){"roles"===e.type?d.children.push(e):"users"===e.type&&c.children.push(e)}),s.push(d),s.push(c),s=(0,D.generateTreeData)(s),r.push("abc1234567"),r.push("abc2234567"),a.setState({expandedKeys:r,roleSearchValue:t,autoExpandParent:!0,treeRoData:s})}else a.restoreRoTreeData(o),a.setState({roleSearchValue:t,expandedKeys:[]});else if("2"===n)if(t){for(var p in o)o.hasOwnProperty(p)&&"resps"===p&&o[p].map(function(e){e.text=e.code+"  "+e.name,e.text.indexOf(t)>-1&&(r.push(e.key),l.push(e))});var u=T.default.cloneDeep(w.initAbiTreeData2);u.children=l,s.push(u),s=(0,D.generateTreeData)(s),r.push("abc3334567"),a.setState({expandedKeys:r,respSearchValue:t,autoExpandParent:!1,treeResData:s})}else a.restoreResTreeData(o.resps),a.setState({respSearchValue:t})},a.onCheck=function(e,t){switch(e){case"resOnselect":a.onCheckRoFun(t);break;case"allowedOnselect":a.onCheckAllowedFun(t)}},a.onCheckRoFun=function(e){var t=e.filter(function(e){return!j.includes(e)});a.setState({roCheckedKeys:t},a.lookCheckDataFun)},a.lookCheckDataFun=function(){var e=a.state.roCheckedKeys,t=a.props.roleUserDatas,n=e.filter(function(e){return"abc1234567"!==e&&"abc2234567"!==e&&"abc3334567"!==e}),o=[];n.map(function(e){var a={},n=function(n){t[n].map(function(t){t.id===e&&(a.key=t.id,a.id=t.id,a.pk=t.id,a.text=t.code+"  "+t.name,a.code=t.code,"users"===n?a.type="user":"roles"===n?a.type="role":"resps"===n&&(a.type="resp"))})};for(var r in t)n(r);o.push(a)}),a.props.setRoCheckedObjArray(o)},a.onCheckAllowedFun=function(e){a.setState({allowedCheckedKeys:e})},a.handleSearchDel=function(){var e=a.state.tabActiveKey,t=a.props.roleUserDatas;switch(e){case"1":a.restoreRoTreeData(t),a.setState({roleSearchValue:"",expandedKeys:[]});break;case"2":a.restoreResTreeData(t.resps),a.setState({respSearchValue:"",expandedKeys:[]})}},a.treeResAndUser=function(e,t,n,o,r,l){var s=a.state,i=s.expandedKeys,d=s.autoExpandParent,c=a.props.json;return m.default.createElement("div",{className:r||""},n?"":m.default.createElement("div",{className:"fixed-search-input"},m.default.createElement(K,{style:{marginBottom:8},placeholder:(0,k.langCheck)("10180TM-000010","pages",c),onChange:a.onSearch,value:o,suffix:o.length>0?m.default.createElement("i",{className:"iconfont icon-qingkong",onClick:function(){a.handleSearchDel()}}):"",fieldid:"search"})),e.length>0&&m.default.createElement(N,{fieldid:n?"allocationRight":"allocationLeft",areaCode:N.config.TreeCom},m.default.createElement(M,{showLine:!0,checkable:!0,onExpand:a.onExpand,expandedKeys:i,onSelect:function(e,n){a.onSelect(t,n)},autoExpandParent:d,onDoubleClick:function(e,n){a.hanldeDoubleClick(t,n)},onCheck:function(e){a.onCheck(t,e)},checkedKeys:l},function e(a){return a.map(function(a){var n=a.text,r=a.id,l=void 0;if("resOnselect"===t){var s=n.indexOf(o),d=n.substr(0,s),c=n.substr(s+o.length);l=s>-1?m.default.createElement("span",null,a.children?m.default.createElement("span",{className:"tree-switch-icon iconfont "+(i.includes(r)?"icon-wenjianjiadakai":"icon-wenjianjia")}):m.default.createElement("span",{className:"tree-dot"}),d,m.default.createElement("span",{style:{color:"#f50"}},o),c):m.default.createElement("span",null,m.default.createElement("span",null," ",n," "))}else"allowedOnselect"===t&&(l=n);var p=a.children?"fieldid_"+n+"_node":"fieldid_"+a.code+"_node";return a.children&&a.children.length>0?m.default.createElement(A,{key:r,title:l,refData:a,className:p},e(a.children)):m.default.createElement(A,{key:r,title:l,refData:a,className:p})})}(e))))},a.handleAlloOk=function(){var e=a.state,t=e.treeAllowedData,o=e.orgidObj,r=e.nodeKeyValue,l=a.props,s=l.templatePk,i=l.appCode,d=l.pageCode,c=l.def1,p=l.json;if(o.refpk)if(t){for(var u={},f=0;f<t.length;f++){var m=t[f];for(var h in m)"id"===h&&(u[m[h]]=m.type)}var g="";for(var T in u)g=g+(T+":")+u[T]+",";var C=g.length;g=g.substr(0,C-1);var b={pageCode:d,templateId:s,orgId:o.refpk,appCode:i};b.targets=g,"apppage"===c?b.templateType="bill":"menuitem"===c&&(b.templateType="print",b.pageCode&&delete b.pageCode,r&&(b.pageCode=r)),a.props.mobileInfoData&&(b=(0,n.default)({},b,a.props.mobileInfoData)),(0,y.default)({url:"/nccloud/platform/template/assignTemplate.do",data:b,loading:!0,info:{name:(0,k.langCheck)("10180TM-000012","pages",p),action:(0,k.langCheck)("10180TM-000013","pages",p)},success:function(e){var t=e.data;t.success&&((0,v.default)({status:"success",msg:t.msg}),localStorage.removeItem("appTempletStorage_"+i+"_"+d),a.props.setAssignModalVisible(!1))}})}else(0,v.default)({status:"warning",msg:(0,k.langCheck)("10180TM-000009","pages",p)});else(0,v.default)({status:"error",msg:(0,k.langCheck)("10180TM-000011","pages",p)})},a.handleOrlCancel=function(){a.props.setAssignModalVisible(!1)},a.handdleRefChange=function(e){var t=a.state.orgidObj,n=e.refname,o=e.refcode,r=e.refpk;t.refname=n,t.refcode=o,t.refpk=r,a.setState({orgidObj:t},a.reqRoTreeData)},a.state={expandedKeys:[],roleSearchValue:"",respSearchValue:"",autoExpandParent:!1,nodeKeyValue:a.props.nodeKey&&a.props.nodeKey.length>0?a.props.nodeKey[0]:"",treeRoData:[],treeResData:[],roCheckedKeys:[],allowedCheckedKeys:[],allowDataArray:[],treeAllowedData:[],orgidObj:{refcode:"",refname:window.GETBUSINESSINFO().groupName,refpk:window.GETBUSINESSINFO().groupId},tabActiveKey:"1",json:{}},a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.state.orgidObj.refpk&&this.reqRoTreeData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.orgidObj,n=t.treeRoData,o=t.treeResData,r=t.treeAllowedData,l=t.tabActiveKey,s=t.roleSearchValue,i=t.respSearchValue,d=t.allowedCheckedKeys,p=t.roCheckedKeys,f=this.props,h=f.pageCode,g=f.def1,T=f.nodeKey,y=f.json,v=f.mobileInfoData;return m.default.createElement(x.default,{dialogClassName:"allocation-modal",title:(0,k.langCheck)("10180TM-000014","pages",y),visible:this.props.alloVisible,onOk:this.handleAlloOk,onCancel:this.handleOrlCancel,okText:(0,k.langCheck)("10180TM-000015","pages",y),cancelText:(0,k.langCheck)("10180TM-000016","pages",y),width:720,maskClosable:!1,keyboard:!0,centered:!0,fieldid:"allocation"},m.default.createElement("div",{className:"allocationPage"},m.default.createElement("div",{className:"pageCode-show"},m.default.createElement("p",{className:"pageCodeName"},(0,k.langCheck)("10180TM-000017","pages",y),m.default.createElement("span",null,h||v&&v.pageCode)),"menuitem"===g&&m.default.createElement("div",null,m.default.createElement("label",{htmlFor:""},(0,k.langCheck)("10180TM-000018","pages",y)),m.default.createElement(u.default,{showSearch:!0,style:{width:200},placeholder:(0,k.langCheck)("10180TM-000019","pages",y),optionFilterProp:"children",onSelect:function(t){e.setState({nodeKeyValue:t},function(){e.reqAllowTreeData()})},defaultValue:null==T?"":T[0],filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},T&&T.length>0&&T.map(function(e,t){if(e)return m.default.createElement(R,{value:e},e)})))),m.default.createElement("div",{className:"allocationPage-content"},m.default.createElement("div",{className:"allocationPage-content-tree"},m.default.createElement("div",{className:"allocation-treeCom"},m.default.createElement(c.default,{defaultActiveKey:"1",activeKey:l,renderTabBar:function(e,t){return m.default.createElement(N,{areaCode:N.config.TABS}," ",m.default.createElement(t,e))},onChange:function(t){e.setState({tabActiveKey:t})}},m.default.createElement(_,{tab:(0,k.langCheck)("10180TM-000020","pages",y),key:"1"},m.default.createElement(N,{className:"allocation-treeScrollName",fieldid:"allocationUser",areaCode:N.config.TREE},this.treeResAndUser(n,"resOnselect",null,s,"searchTree-assign",p))),m.default.createElement(_,{tab:(0,k.langCheck)("10180TM-000006","pages",y),key:"2"},m.default.createElement(N,{className:"allocation-treeScrollName",fieldid:"allocationDuty",areaCode:N.config.TREE},this.treeResAndUser(o,"resOnselect",null,i,"searchTree-assign",p))))),m.default.createElement("div",{className:"allocation-button"},m.default.createElement("div",null,m.default.createElement("div",null,m.default.createElement("p",null,m.default.createElement(P,{fieldid:"toRight",onClick:this.allowClick.bind(this,"allowRole")},m.default.createElement("i",{className:"icon iconfont icon-jiantouyou"}))),m.default.createElement("p",null,m.default.createElement(P,{fieldid:"toLeft",onClick:this.allowClick.bind(this,"allowRoleCancel")},m.default.createElement("i",{className:"icon iconfont icon-jiantouzuo"})))))),m.default.createElement("div",{className:"allocation-treeContainer"},m.default.createElement("div",{className:"allocation-select"},m.default.createElement("label",{htmlFor:""},(0,k.langCheck)("10180TM-000021","pages",y)),m.default.createElement(C.default,{value:a,placeholder:(0,k.langCheck)("10180TM-000022","pages",y),fieldid:"businessUnit",onChange:function(t){e.handdleRefChange(t)}})),m.default.createElement("div",{className:"allocation-tree"},r.length>0&&this.treeResAndUser(r,"allowedOnselect","hideSearch","","",d)))))))}}]),t}(f.Component);V.propTypes={templatePk:h.default.string.isRequired,roCheckedObjArray:h.default.array.isRequired,setRoCheckedObjArray:h.default.func.isRequired,nodeKey:h.default.array.isRequired,roleUserDatas:h.default.object.isRequired,setRoleUserDatas:h.default.func.isRequired,json:h.default.object.isRequired},t.default=(0,g.connect)(function(e){return{templatePk:e.TemplateSettingData.templatePk,pageCode:e.TemplateSettingData.pageCode,appCode:e.TemplateSettingData.appCode,def1:e.TemplateSettingData.def1,nodeKey:e.TemplateSettingData.nodeKey,roCheckedObjArray:e.TemplateSettingData.roCheckedObjArray,roleUserDatas:e.TemplateSettingData.roleUserDatas}},{setRoCheckedObjArray:b.setRoCheckedObjArray,setRoleUserDatas:b.setRoleUserDatas})(V)},1002:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.initRoTreeData={id:"abc1234567",text:"",children:[]},t.initUserTreeData={id:"abc2234567",text:"",children:[]},t.initRoTreeData2={id:"abc1234567",text:"",children:[]},t.initUserTreeData2={id:"abc2234567",text:"",children:[]},t.initAbiTreeData={id:"abc3334567",text:"",children:[]},t.initAbiTreeData2={id:"abc3334567",text:"",children:[]}},1003:function(e,t,a){var n=a(1004);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(16)(n,o);n.locals&&(e.exports=n.locals)},1004:function(e,t,a){(e.exports=a(14)(!1)).push([e.i,".allocation-modal .u-modal-body{padding:15px 0 0}.allocationPage .pageCode-show{display:flex;flex-flow:row nowrap;justify-content:space-between;align-items:center;margin:0 15px;padding:10px 20px;background-color:#f3f3f3}.allocationPage .pageCode-show .pageCodeName{margin-bottom:0}.allocationPage .allocationPage-content .allocationPage-content-select{display:flex;justify-content:space-between;padding:15px 20px;border-top:1px solid #ccc;border-bottom:1px solid #ccc}.allocationPage .allocationPage-content .allocationPage-content-tree{display:flex;justify-content:space-between}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom{width:42%}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .ant-tabs-bar{margin:0;padding:0 5px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .allocation-treeScrollName{height:330px;border-right:1px solid #e8e8e8;position:relative;padding-top:50px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .allocation-treeScrollName .searchTree-assign{padding:0 10px;overflow:auto;height:100%}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .allocation-treeScrollName .searchTree-assign .fixed-search-input{position:absolute;top:0;left:0;padding:0 15px;width:100%;display:flex;background-color:#fff;z-index:1}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .allocation-treeScrollName .searchTree-assign .tree-switch-icon{color:#f2b224;margin-right:5px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .allocation-treeScrollName .searchTree-assign .tree-dot{display:inline-block;width:5px;height:5px;background-color:#555;border-radius:100%;margin:0 7px 2px 0}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .ant-input-affix-wrapper{margin-bottom:8px;margin-top:8px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .ant-input-affix-wrapper .ant-input{width:100%}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button{padding-top:43px;width:16%}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button>div{border-top:1px solid #e8e8e8;display:flex;align-items:center;height:330px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button>div>div{width:100%;display:flex;flex-direction:column;justify-content:center}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button>div>div p{text-align:center;margin-bottom:30px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button>div>div .icon{color:rgba(85,85,85,.5)}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeContainer{width:42%;display:flex;flex-direction:column}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeContainer .allocation-select{padding:5px 0 8px;display:flex;align-items:center}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeContainer .allocation-select .refer-wrapper{width:200px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeContainer .allocation-tree{height:330px;border:1px solid #e8e8e8;border-right:0;border-bottom:0;overflow:auto}",""])},1005:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=k(a(136)),o=k(a(2)),r=k(a(13)),l=k(a(4)),s=k(a(7)),i=k(a(3)),d=k(a(5));a(194);var c=a(1),p=k(c),u=k(a(0)),f=a(28),m=a(922),h=k(a(419)),g=a(18),T=k(a(26)),y=k(a(54));function k(e){return e&&e.__esModule?e:{default:e}}a(1006);var v=function(e){function t(e){(0,l.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.trim=function(e){if(e)return e.replace(/^\s+|\s+$/g,"")},a.checkCode=function(){var e=a.props,t=e.json,n=e.templateTitleVal;if(!a.trim(n))return document.getElementById("templateCode").classList.add("has-error"),void a.setState({codeErrorMsg:(0,g.langCheck)("10180TM-000024","pages",t)});document.getElementById("templateCode").classList.remove("has-error"),a.setState({codeErrorMsg:""})},a.checkName=function(){var e=a.props,t=e.json,n=e.templateNameVal;if(!a.trim(n))return document.getElementById("templateName").classList.add("has-error"),void a.setState({nameErrorMsg:(0,g.langCheck)("10180TM-000023","pages",t)});a.setState({nameErrorMsg:""}),document.getElementById("templateName").classList.remove("has-error")},a.handleOk=function(){var e=a.props,t=e.def1,n=e.templatePk,r=e.pageCode,l=e.appCode,s=e.templateNameVal,i=e.templateTitleVal,d=e.setSelectedTemKeys,c=e.setParentIdcon,p=e.setTemplateNameVal,u=e.setTemplatePk,f=e.setTemplateTitleVal,m=e.setCopyId,h=e.setIsDefaultTem,k=e.json;if(a.trim(s)){var v={pageCode:r,templateId:n,name:s,appCode:l},C=void 0;if("apppage"===t)v.templateType="bill",C="/nccloud/platform/template/copyTemplate.do";else if("menuitem"===t){if(!a.trim(i))return;v.templateCode=i,C="/nccloud/platform/template/copyPrintTemplate.do"}a.props.mobileInfoData&&(C="/nccloud/platform/template/copyTemplate.do",v=(0,o.default)({},a.props.mobileInfoData,{name:s}));var b=a;(0,g.DeferFn)(function(){(0,T.default)({url:C,data:v,loading:!0,info:{name:(0,g.langCheck)("10180TM-000012","pages",k),action:(0,g.langCheck)("10180TM-000025","pages",k)},success:function(e){var a=e.data;a.success&&((0,y.default)({status:"success",msg:a.msg}),d([a.data.id]),c(a.data.id),p(a.data.name),u(a.data.id),m(a.data.id),h("n"),"menuitem"===t&&f(a.data.code),b.props.onCopy(a.data),b.handleCancel())}})})}},a.handleCancel=function(){a.props.setCopyVisible(!1)},a.state={nameErrorMsg:"",codeErrorMsg:""},a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.nameErrorMsg,o=t.codeErrorMsg,r=this.props,l=r.def1,s=r.treeTemPrintData,i=r.templateTitleVal,d=r.templateNameVal,c=r.json;return p.default.createElement(h.default,{mask:!0,title:(0,g.langCheck)("10180TM-000046","pages",c),visible:this.props.visible,onOk:this.handleOk,okText:(0,g.langCheck)("10180TM-000015","pages",c),cancelText:(0,g.langCheck)("10180TM-000016","pages",c),centered:!0,onCancel:this.handleCancel,maskClosable:!1,fieldid:"copy"},p.default.createElement("div",{className:"copyTemplate",style:"apppage"===l?{padding:"60px 20px"}:{}},"menuitem"==l&&s.length>0&&p.default.createElement("div",{className:"templateCode"},p.default.createElement("label",{htmlFor:""},(0,g.langCheck)("10180TM-000027","pages",c)),p.default.createElement(n.default,{style:{width:"80%"},id:"templateCode",onBlur:this.checkCode,value:i,placeholder:(0,g.langCheck)("10180TM-000028","pages",c),fieldid:"templateCode",onChange:function(t){var a=t.target.value;e.props.setTemplateTitleVal(a)}}),p.default.createElement("p",{className:"areaCode-errorMsg"},o)),p.default.createElement("div",{className:"templateName"},p.default.createElement("label",{htmlFor:""},(0,g.langCheck)("10180TM-000029","pages",c)),p.default.createElement(n.default,{value:d,style:{width:"80%"},id:"templateName",onBlur:this.checkName,placeholder:(0,g.langCheck)("10180TM-000030","pages",c),fieldid:"templateName",onChange:function(t){var a=t.target.value;e.props.setTemplateNameVal(a)}}),p.default.createElement("p",{className:"areaName-errorMsg"},a))))}}]),t}(c.Component);v.propTypes={templatePk:u.default.string.isRequired,pageCode:u.default.string.isRequired,appCode:u.default.string.isRequired,def1:u.default.string.isRequired,templateTitleVal:u.default.string.isRequired,templateNameVal:u.default.string.isRequired,json:u.default.object.isRequired},t.default=(0,f.connect)(function(e){return{templatePk:e.TemplateSettingData.templatePk,pageCode:e.TemplateSettingData.pageCode,appCode:e.TemplateSettingData.appCode,def1:e.TemplateSettingData.def1,templateTitleVal:e.TemplateSettingData.templateTitleVal,templateNameVal:e.TemplateSettingData.templateNameVal,treeTemPrintData:e.TemplateSettingData.treeTemPrintData}},{setSelectedTemKeys:m.setSelectedTemKeys,setParentIdcon:m.setParentIdcon,setTemplateNameVal:m.setTemplateNameVal,setTemplatePk:m.setTemplatePk,setTemplateTitleVal:m.setTemplateTitleVal,setCopyId:m.setCopyId,setIsDefaultTem:m.setIsDefaultTem})(v)},1006:function(e,t,a){var n=a(1007);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(16)(n,o);n.locals&&(e.exports=n.locals)},1007:function(e,t,a){(e.exports=a(14)(!1)).push([e.i,".copyTemplate{padding:35px 20px}.copyTemplate .ant-input{margin-bottom:20px}.copyTemplate .templateCode,.copyTemplate .templateName{position:relative}.copyTemplate .areaCode-errorMsg,.copyTemplate .areaName-errorMsg{color:#f5222d;font-size:13px;position:absolute;top:30px;left:65px}.copyTemplate .has-error{border-color:#f5222d}",""])},1008:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(a(2)),o=l(a(196));t.handleDownload=function(e,t,a,l,s,i){var d=""+(window.actionName||"文件导出"),c=e.appcode,p={sys_busiaction:d,sys_appcode:c,sys_ts:(new Date).getTime()};a=function(e){switch(e){case 1:return"multipart/form-data";case 2:return"application/x-www-form-urlencoded";case 3:return"text/plain";default:return"multipart/form-data"}}(a);var u=[{target:l||"_blank",method:"POST",enctype:a,type:"hidden",action:t||""},document.createElement("form")],f=u[0],m=u[1];(0,o.default)(m,f);var h=(0,n.default)({},e,p),g=function(e){if(h[e]instanceof Array)h[e].forEach(function(t){var a=document.createElement("input");a.type="hidden",a.name=e,a.value=t,m.appendChild(a)});else{var t=document.createElement("input");t.type="hidden",t.name=e,t.value=h[e],m.appendChild(t)}};for(var T in h)g(T);try{document.body.appendChild(m),m.submit(),document.body.removeChild(m),(0,r.default)({status:"success",msg:s||"导出成功"})}catch(e){(0,r.default)({status:"error",msg:i||"导出失败"})}return!1};var r=l(a(54));function l(e){return e&&e.__esModule?e:{default:e}}},1009:function(e,t,a){e.exports=a.p+"images/noPage.png"},1010:function(e,t,a){e.exports=a.p+"images/noPrint.png"},1011:function(e,t,a){e.exports=a.p+"images/unSelected.png"},1043:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(897));a(895);var o=r(a(424));function r(e){return e&&e.__esModule?e:{default:e}}var l=n.default.TreeNode;t.default=function e(t,a){return t.map(function(t){var n=t.code,r=t.name,s=t.pk,i=n+" "+r;"00"===n&&(i=""+r);var d=i.indexOf(a),c=i.substr(0,d),p=i.substr(d+a.length),u=d>-1?React.createElement("span",null,c,React.createElement("span",{style:{color:"#f50"}},a),p):React.createElement("span",null,React.createElement("span",null," ",i," ")),f="00"===n?"fieldid_"+r+"_node":"fieldid_"+n+"_node";return t.children&&t.children.length>0?React.createElement(l,{key:s,title:u,refData:t,icon:function(e){var t=e.expanded;return React.createElement(o.default,{width:20,height:20,xlinkHref:t?"#icon-wenjianjiadakai":"#icon-wenjianjia"})},switcherIcon:function(e){var t=e.expanded;return React.createElement("i",{className:"font-size-18 iconfont "+(t?"icon-shu_zk":"icon-shushouqi")})},className:f},e(t.children,a)):React.createElement(l,{icon:React.createElement("span",{className:"tree-dot"}),key:s,title:u,refData:t,className:f})})}},1240:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(897)),o=y(a(13)),r=y(a(4)),l=y(a(7)),s=y(a(3)),i=y(a(5)),d=y(a(136));a(895),a(194);var c=a(1),p=y(c),u=y(a(0)),f=a(28),m=a(922),h=a(885),g=a(18),T=y(a(1043));function y(e){return e&&e.__esModule?e:{default:e}}var k=y(a(32)).default.base.NCDiv,v=d.default.Search,C=function(e){function t(e){(0,r.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.onExpand=function(e){a.props.setExpandedKeys(e),a.setState({autoExpandParent:!1})},a.onChange=function(e){var t=e.target.value;if(t)a.props.setSearchValue(t);else{a.props.reqTreeData(a.props.setInforFun);a.props.setExpandedKeys(["00"]),a.props.setSearchValue("")}},a.handleTreeSearch=function(e){a.props.handleSearch(e,a.props.handleExpanded)},a.onSelectQuery=function(e,t){var n=a.props.selectedKeys;e.length>0?(a.props.setSelectedKeys(e),a.props.setDef1(t.selectedNodes[0].props.refData.def1),a.props.setAppCode(t.selectedNodes[0].props.refData.appCode),a.props.setPageCode(t.selectedNodes[0].props.refData.code),a.setState({autoExpandParent:!0},a.props.onSelect)):n&&a.props.onSelect()},a.hanldeDoubleClick=function(e){var t,n;t=e.props.refData.pk,n=a.props.expandedKeys.concat([t]),a.props.setExpandedKeys(n)},a.handleSearchDel=function(){a.props.reqTreeData(a.props.setInforFun);a.props.setExpandedKeys(["00"]),a.props.setSearchValue("")},a.state={autoExpandParent:!1},a}return(0,i.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.autoExpandParent,a=this.props,o=a.expandedKeys,r=a.selectedKeys,l=a.searchValue,s=a.json,i=[{code:"00",name:(0,g.langCheck)("10180TM-000000","pages",s),pk:"00",children:(0,h.createTree)(this.props.treeData,"code","pid")}];return p.default.createElement(k,{className:"templateSetting-searchTree workbench-scroll",fieldid:"templateSetting",areaCode:k.config.TREE},p.default.createElement("div",{className:"fixed-search-input"},p.default.createElement(v,{className:l&&"sider-search-color",placeholder:(0,g.langCheck)("10180TM-000001","pages",s),onChange:this.onChange,onSearch:this.handleTreeSearch,value:l,suffix:l.length>0?p.default.createElement("i",{className:"iconfont icon-qingkong",onClick:this.handleSearchDel}):"",fieldid:"search"})),p.default.createElement(k,{fieldid:"templateSetting",areaCode:k.config.TreeCom},i.length>0&&p.default.createElement(n.default,{showLine:!0,showIcon:!0,onExpand:function(t,a){e.onExpand(t,a)},expandedKeys:o,onSelect:function(t,a){e.onSelectQuery(t,a)},autoExpandParent:t,selectedKeys:r,onDoubleClick:function(t,a){e.hanldeDoubleClick(a)}},(0,T.default)(i,l))))}}]),t}(c.Component);C.propTypes={treeData:u.default.array.isRequired,setExpandedKeys:u.default.func.isRequired,setSelectedKeys:u.default.func.isRequired,setDef1:u.default.func.isRequired,setTreeTemPrintData:u.default.func.isRequired,setSearchValue:u.default.func.isRequired,setPageCode:u.default.func.isRequired,setAppCode:u.default.func.isRequired,selectedKeys:u.default.array.isRequired,expandedKeys:u.default.array.isRequired,searchValue:u.default.string.isRequired,pageCode:u.default.string.isRequired,json:u.default.object.isRequired},t.default=(0,f.connect)(function(e){return{treeData:e.TemplateSettingData.treeData,selectedKeys:e.TemplateSettingData.selectedKeys,expandedKeys:e.TemplateSettingData.expandedKeys,searchValue:e.TemplateSettingData.searchValue,json:e.TemplateSettingData.json}},{setExpandedKeys:m.setExpandedKeys,setSelectedKeys:m.setSelectedKeys,setDef1:m.setDef1,setSearchValue:m.setSearchValue,setPageCode:m.setPageCode,setAppCode:m.setAppCode})(C)},1241:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a(13)),o=u(a(4)),r=u(a(7)),l=u(a(3)),s=u(a(5)),i=a(1),d=u(i),c=a(28),p=u(a(1242));function u(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={},a}return(0,s.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.dataSource;return e.length>0?d.default.createElement("div",{className:"templateTree-wrap"},d.default.createElement("p",{className:"template-title"},this.props.langDataTitle),d.default.createElement(p.default,{dataSource:e,onSelectQuery:this.props.onSelectQuery})):d.default.createElement("div",{className:"print"===this.props.type?"noPrintData":"noPageData"},d.default.createElement("p",{className:"noDataTip"},this.props.langNoDataTitle))}}]),t}(i.Component);f.propTypes={},t.default=(0,c.connect)(function(e){return{}},{})(f)},1242:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(897)),o=h(a(13)),r=h(a(4)),l=h(a(7)),s=h(a(3)),i=h(a(5));a(895);var d=a(1),c=h(d),p=h(a(0)),u=a(28),f=a(922),m=h(a(1043));function h(e){return e&&e.__esModule?e:{default:e}}var g=h(a(32)).default.base.NCDiv,T=function(e){function t(e){(0,r.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.onExpand=function(e){a.props.setExpandedTemKeys(e),a.setState({autoExpandTemParent:!1})},a.hanldeDoubleClick=function(e){var t=e.props.refData.pk,n=a.props.expandedTemKeys.concat([t]);a.props.setExpandedTemKeys(n)},a.onExpand=function(e){a.props.setExpandedTemKeys(e),a.setState({autoExpandTemParent:!1})},a.onSelect=function(e,t){a.props.onSelectQuery(e,t)},a.state={autoExpandTemParent:!1},a}return(0,i.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.autoExpandTemParent,a=this.props,o=a.dataSource,r=a.expandedTemKeys,l=a.selectedTemKeys;return c.default.createElement(g,{className:"templateTree",fieldid:"template",areaCode:g.config.TreeCom,style:1==o.length?{marginLeft:0}:{}},o.length>0&&c.default.createElement(n.default,{showLine:!0,showIcon:!0,onExpand:function(t,a){e.onExpand(t,a)},expandedKeys:r,onSelect:function(t,a){e.onSelect(t,a)},autoExpandParent:t,selectedKeys:l,onDoubleClick:function(t,a){e.hanldeDoubleClick(a)}},(0,m.default)(o,"")))}}]),t}(d.Component);T.propTypes={setSelectedTemKeys:p.default.func.isRequired,setExpandedTemKeys:p.default.func.isRequired,setTemplateNameVal:p.default.func.isRequired,selectedTemKeys:p.default.array.isRequired,expandedTemKeys:p.default.array.isRequired},t.default=(0,u.connect)(function(e){return{selectedTemKeys:e.TemplateSettingData.selectedTemKeys,expandedTemKeys:e.TemplateSettingData.expandedTemKeys}},{setSelectedTemKeys:f.setSelectedTemKeys,setExpandedTemKeys:f.setExpandedTemKeys})(T)},1243:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(2)),o=v(a(139)),r=v(a(111)),l=v(a(13)),s=v(a(4)),i=v(a(7)),d=v(a(3)),c=v(a(5)),p=v(a(136));a(194);var u=a(1),f=v(u),m=v(a(0)),h=a(28),g=a(18),T=v(a(26)),y=v(a(54)),k=v(a(419));function v(e){return e&&e.__esModule?e:{default:e}}var C=v(a(32)).default.base,b=C.NCDiv,D=C.NCButton,w=C.NCTree,x=w.NCTreeNode,E=p.default.Search,S=function(e){function t(e){(0,s.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.trim=function(e){if(e)return e.replace(/^\s+|\s+$/g,"")},a.checkName=function(){var e=a.props,t=e.json,n=(e.templateNameVal,a.state.templateName);if(!a.trim(n))return document.getElementById("templateName").classList.add("has-error"),void a.setState({nameErrorMsg:(0,g.langCheck)("10180TM-000023","pages",t)});a.setState({nameErrorMsg:""}),document.getElementById("templateName").classList.remove("has-error")},a.isPartSelectedLeft=function(){var e=a.state,t=e.checkedKeys,n=e.saveLeafArr,l=e.requestLeftTreeData,s=e.treeData,i=[],d=[],c=[],p=[];console.log("checkedKeys----",t),console.log("saveLeafArr----",n),console.log("requestLeftTreeData----",l);var u=t,f=(0,g.deepClone)(s),m=(0,g.deepClone)(l);t.length>0&&(t.map(function(e){f.map(function(t){t.children.map(function(a){e==a.pk&&u.push(t.pk)})})}),(u=(0,r.default)(new o.default(u))).map(function(e){m.map(function(t){e==t.pk&&i.push(t)})}),console.log("checkedArr----",i),i.map(function(e){e.isleaf?(e.children=[],p.push(e)):(e.children=[],c.push(e))}),c.map(function(e){p.map(function(t){e.code==t.pid&&e.children.push(t)})}),d=c,console.log("checkedTree----",d),a.setState({rightTreeData:d,rightCheckedKeys:[]}))},a.isPartSelectedRight=function(){var e=a.state,t=e.rightCheckedKeys,n=e.rightTreeData,o=(0,g.deepClone)(n);t.length>0&&(t.map(function(e){o.map(function(t,a){e==t.pk?o.splice(a,1):t.children.map(function(a,n){e==a.pk&&t.children.splice(n,1)})})}),console.log("partRightTreeArr---",o),a.setState({rightTreeData:o}))},a.isAllSelectedLeft=function(){console.log("this.state.saveLeafArr",a.state.saveLeafArr),a.setState({rightTreeData:a.state.treeData,rightCheckedKeys:[]})},a.isAllSelectedRight=function(){a.setState({rightTreeData:[],rightCheckedKeys:[]})},a.onExpand=function(e){a.setState({expandedKeys:e,autoExpandParent:!1})},a.onCheck=function(e){a.setState({checkedKeys:e})},a.onRightCheck=function(e){a.setState({rightCheckedKeys:e})},a.onSelect=function(e,t){a.setState({selectedKeys:e})},a.renderTreeNodes=function(e){return e.map(function(e){var t=a.state.searchValue,o=e.name,r=(e.pk,void 0);if(""!=t){var l=o.indexOf(t),s=o.substr(0,l),i=o.substr(l+t.length);r=l>-1?f.default.createElement("span",null,s,f.default.createElement("span",{style:{color:"#f50"}},t),i):f.default.createElement("span",null,f.default.createElement("span",null," ",o," "))}else r=o;var d="fieldid_"+o+"_node";return e.children?f.default.createElement(x,{title:r,key:e.pk,dataRef:e,className:d},a.renderTreeNodes(e.children)):f.default.createElement(x,(0,n.default)({},e,{className:d}))})},a.rightRenderTreeNodes=function(e){return e.map(function(e){var t="fieldid_"+e.name+"_node";return e.children?f.default.createElement(x,{title:e.name,key:e.pk,dataRef:e,className:t},a.renderTreeNodes(e.children)):f.default.createElement(x,e)})},a.handleOk=function(){var e=a.props,t=e.templatePk,n=(e.pageCode,e.appCode,e.def1,e.templateTitleVal,e.templateNameVal,e.json),o=a.state,r=o.templateName,l=o.rightTreeData;if(""!=r){var s=(0,g.deepClone)(l);s.map(function(e){e.children.map(function(e){e.pageCode=e.code,delete e.appId,delete e.appCode,delete e.pk,delete e.name,delete e.pid,delete e.isleaf,delete e.children,delete e.code}),e.pageCodes=e.children,delete e.appId,delete e.pk,delete e.code,delete e.name,delete e.pid,delete e.isleaf,delete e.children});var i={templateId:t,templateName:r,templateType:"bill",appAndPageCodes:s},d=a;(0,g.DeferFn)(function(){(0,T.default)({url:"/nccloud/platform/template/copyTemplateToOtherAppsAction.do",data:i,loading:!0,info:{name:(0,g.langCheck)("10180TM-000012","pages",n),action:(0,g.langCheck)("10180TM-000025","pages",n)},success:function(e){var t=e.data;t.success&&((0,y.default)({status:"success",msg:t.data}),d.props.reqTreeTemData("copyOthersApp"),d.handleCancel())}})})}},a.handleCancel=function(){a.props.setCopyOthersVisible(!1)},a.onChangeTemplateName=function(e){a.setState({templateName:e.target.value})},a.searchOnChange=function(e){var t=e.target.value;a.setState({searchValue:t});var n=a.state,o=(n.treeData,n.searchTreeDataSave),r=n.requestLeftTreeData;if(""!=t){var l=(0,g.deepClone)(r).filter(function(e){return e.isleaf?e.name.indexOf(t)>-1?e:void 0:e}),s=[],i=[];l.map(function(e){e.children=[],e.isleaf?i.push(e):s.push(e)}),s.map(function(e){i.map(function(t){e.code==t.pid&&e.children.push(t)})});var d=s.filter(function(e){if(e.children.length>0)return e});console.log("newTree=------------",d);var c=(0,g.deepClone)(d);a.setState({treeData:c})}else a.setState({treeData:o})},a.state={nameErrorMsg:"",templateName:a.props.templateNameVal,treeData:[],searchTreeDataSave:[],selectedKeys:[],checkedKeys:[],expandedKeys:[],autoExpandParent:!1,saveLeafArr:[],generateRightTreeData:[],rightTreeData:[],rightCheckedKeys:[],requestLeftTreeData:[],searchValue:""},a}return(0,c.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.appCode,n=t.json;this.state.requestLeftTreeData;(0,T.default)({data:{appCode:a},url:"/nccloud/platform/template/queryAppAndPagesAction.do",loading:!0,info:{name:(0,g.langCheck)("10180TM-000012","pages",n),action:(0,g.langCheck)("10180TM-000055","pages",n)},success:function(t){var a=t.data;if(a.success){var n=[],o=[],r=(0,g.deepClone)(a.data);a.data.map(function(e){e.isleaf?(e.children=[],o.push(e)):(e.children=[],n.push(e))}),console.log("isAllRootNode",n),console.log("isAllLeafNode",o),n.map(function(e){o.map(function(t){e.code==t.pid&&e.children.push(t)})}),console.log("isAllRootNode====",n),console.log("isAllLeafNode====",o),e.setState({treeData:n,searchTreeDataSave:n,saveLeafArr:o,requestLeftTreeData:r})}}})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.templateNameVal,a=e.json;console.log("templateNameVal",t);var n=this.state,o=n.templateName,r=n.treeData,l=(n.selectedKeys,n.checkedKeys,n.expandedKeys,n.autoExpandParent),s=n.rightTreeData,i=(n.rightCheckedKeys,n.nameErrorMsg);return f.default.createElement(k.default,{mask:!0,title:(0,g.langCheck)("10180TM-000055","pages",a),visible:this.props.copyOthersModalVisible,onOk:this.handleOk,okText:(0,g.langCheck)("10180TM-000015","pages",a),cancelText:(0,g.langCheck)("10180TM-000016","pages",a),centered:!0,onCancel:this.handleCancel,maskClosable:!1,width:720,className:"copy-others-moudle",fieldid:"copyOther"},f.default.createElement("div",{className:"copy-others-modal-top"},f.default.createElement("div",{className:"copy-others-modal-header"},(0,g.langCheck)("10180TM-000057","pages",a)),f.default.createElement(p.default,{className:"copy-others-input",style:{width:"45%"},placeholder:(0,g.langCheck)("10180TM-000030","pages",a),defaultValue:t,onChange:this.onChangeTemplateName,id:"templateName",fieldid:"templateName",value:o,onBlur:this.checkName}),f.default.createElement("p",{className:"areaName-errorMsg"},i)),f.default.createElement(b,{className:"copy-others-modal-bottom",fieldid:"transfer",areaCode:b.config.Area},f.default.createElement(b,{className:"left",fieldid:"left",areaCode:b.config.TREE},f.default.createElement("div",{className:"title"},(0,g.langCheck)("10180TM-000058","pages",a)),f.default.createElement(E,{className:"search",fieldid:"search",onChange:this.searchOnChange}),f.default.createElement(b,{className:"leftTree",fieldid:"left",areaCode:b.config.TreeCom},f.default.createElement(w,{checkable:!0,checkStrictly:!1,loadData:this.onLoadData,showLine:!0,multiple:!0,autoExpandParent:l,onExpand:this.onExpand,expandedKeys:this.state.expandedKeys,onSelect:this.onSelect,selectedKeys:this.state.selectedKeys,checkedKeys:this.state.checkedKeys,onCheck:this.onCheck},this.renderTreeNodes(r)))),f.default.createElement("div",{className:"middle"},f.default.createElement("div",{className:"tree-transfer-buttons"},f.default.createElement(D,{className:"transfer-right ",fieldid:"toRight",onClick:this.isPartSelectedLeft},f.default.createElement("i",{className:"iconfont icon-jiantouyou"})),f.default.createElement(D,{className:"transfer-right-double margin-top-8",fieldid:"toRightAll",onClick:this.isAllSelectedLeft},f.default.createElement("i",{className:"transfer-icon-1 iconfont icon-jiantouyou"}),f.default.createElement("i",{className:"transfer-icon-2 iconfont icon-jiantouyou"})),f.default.createElement(D,{className:"transfer-left-double margin-top-25",fieldid:"toLeft",onClick:this.isAllSelectedRight},f.default.createElement("i",{className:"transfer-icon-1 iconfont icon-jiantouzuo"}),f.default.createElement("i",{className:"transfer-icon-2 iconfont icon-jiantouzuo"})),f.default.createElement(D,{className:"transfer-left margin-top-8",fieldid:"toRightAll",onClick:this.isPartSelectedRight},f.default.createElement("i",{className:"iconfont icon-jiantouzuo"})))),f.default.createElement("div",{className:"right"},f.default.createElement("div",{className:"title"},(0,g.langCheck)("10180TM-000059","pages",a)),f.default.createElement(b,{className:"rightTree",fieldid:"right",areaCode:b.config.TreeCom},f.default.createElement(w,{checkable:!0,loadData:this.onLoadData,showLine:!0,multiple:!0,autoExpandParent:l,checkedKeys:this.state.rightCheckedKeys,onCheck:this.onRightCheck},this.rightRenderTreeNodes(s))))))}}]),t}(u.Component);S.propTypes={templatePk:m.default.string.isRequired,pageCode:m.default.string.isRequired,appCode:m.default.string.isRequired,def1:m.default.string.isRequired,templateTitleVal:m.default.string.isRequired,templateNameVal:m.default.string.isRequired,json:m.default.object.isRequired},t.default=(0,h.connect)(function(e){return{templatePk:e.TemplateSettingData.templatePk,pageCode:e.TemplateSettingData.pageCode,appCode:e.TemplateSettingData.appCode,def1:e.TemplateSettingData.def1,templateTitleVal:e.TemplateSettingData.templateTitleVal,templateNameVal:e.TemplateSettingData.templateNameVal,treeTemPrintData:e.TemplateSettingData.treeTemPrintData,json:e.TemplateSettingData.json}},{})(S)},1244:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=T(a(136)),o=T(a(13)),r=T(a(4)),l=T(a(7)),s=T(a(3)),i=T(a(5));a(194);var d=a(1),c=T(d),p=T(a(0)),u=a(28),f=T(a(419)),m=a(18),h=T(a(26)),g=T(a(54));function T(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){(0,r.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.trim=function(e){if(e)return e.replace(/^\s+|\s+$/g,"")},a.checkName=function(){var e=a.props,t=e.json,n=(e.templateNameVal,a.state.templateName);if(!a.trim(n))return document.getElementById("templateName").classList.add("has-error"),void a.setState({nameErrorMsg:(0,m.langCheck)("10180TM-000023","pages",t)});a.setState({nameErrorMsg:""}),document.getElementById("templateName").classList.remove("has-error")},a.handleOk=function(){var e=a.props,t=e.templatePk,n=e.templateNameVal,o=e.json,r=e.saveLeftArrTS,l=a.state.templateName;if(a.trim(n)&&""!=l){var s="";1==r.length?r.map(function(e){s=e.ts}):r.length>1&&r.map(function(e){t==e.templateId&&(s=e.ts)}),document.getElementById("templateName").classList.remove("has-error");var i={templateId:t,templateName:l,ts:s},d=a;(0,m.DeferFn)(function(){(0,h.default)({url:"/nccloud/platform/template/resetTemplateNameAction.do",data:i,loading:!0,info:{name:(0,m.langCheck)("10180TM-000012","pages",o),action:(0,m.langCheck)("10180TM-000025","pages",o)},success:function(e){var t=e.data;t.success&&((0,g.default)({status:"success",msg:t.msg}),d.props.reqTreeTemData("rename"),d.handleCancel())}})})}},a.handleCancel=function(){a.props.setReNameModal(!1)},a.onChangeTemplateName=function(e){a.setState({templateName:e.target.value})},a.state={templateName:a.props.templateNameVal,nameErrorMsg:""},a}return(0,i.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.json,a=e.reNameModalVisible,o=e.templateNameVal,r=this.state,l=r.templateName,s=r.nameErrorMsg;return console.log("templateNameVal",o),c.default.createElement(f.default,{mask:!0,title:(0,m.langCheck)("10180TM-000056","pages",t),visible:a,height:260,onOk:this.handleOk,okText:(0,m.langCheck)("10180TM-000015","pages",t),cancelText:(0,m.langCheck)("10180TM-000016","pages",t),centered:!0,onCancel:this.handleCancel,maskClosable:!1,fieldid:"rename"},c.default.createElement("div",{className:"copyTemplate",style:{padding:"60px 20px"}},c.default.createElement("div",{className:"templateName"},c.default.createElement("label",{htmlFor:""},(0,m.langCheck)("10180TM-000029","pages",t)),c.default.createElement(n.default,{value:l,defaultValue:o,id:"templateName",style:{width:"80%"},onBlur:this.checkName,placeholder:(0,m.langCheck)("10180TM-000030","pages",t),fieldid:"templateName",onChange:this.onChangeTemplateName}),c.default.createElement("p",{className:"areaName-errorMsg"},s))))}}]),t}(d.Component);y.propTypes={templatePk:p.default.string.isRequired,pageCode:p.default.string.isRequired,appCode:p.default.string.isRequired,def1:p.default.string.isRequired,templateTitleVal:p.default.string.isRequired,templateNameVal:p.default.string.isRequired,json:p.default.object.isRequired},t.default=(0,u.connect)(function(e){return{templatePk:e.TemplateSettingData.templatePk,pageCode:e.TemplateSettingData.pageCode,appCode:e.TemplateSettingData.appCode,def1:e.TemplateSettingData.def1,templateTitleVal:e.TemplateSettingData.templateTitleVal,templateNameVal:e.TemplateSettingData.templateNameVal,treeTemPrintData:e.TemplateSettingData.treeTemPrintData,json:e.TemplateSettingData.json}},{})(y)},1245:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(13)),o=h(a(4)),r=h(a(7)),l=h(a(3)),s=h(a(5)),i=a(1),d=h(i),c=h(a(0)),p=a(28),u=a(18),f=h(a(419)),m=h(a(26));function h(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.hideModal=function(){a.props.hideModal(!1)},a.printModalAjax=function(e){var t=a.props.json,n={};n.templateId=e;(0,m.default)({url:"/nccloud/platform/template/previewPrintTemplate.do",data:n,info:{name:(0,u.langCheck)("10180TM-000012","pages",t),action:(0,u.langCheck)("10180TM-000025","pages",t)},success:function(e){var t=e.data;t.success&&(document.getElementsByClassName("printContent")[0].innerHTML=t.data)}})},a.state={},a}return(0,s.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){this.printModalAjax(this.props.templatePk)}},{key:"render",value:function(){var e=this.props,t=e.previewPrintVisible,a=e.json;return d.default.createElement("div",{className:"templateTree-wrap"},d.default.createElement(f.default,{customHeader:(0,u.langCheck)("10180TM-000050","pages",a),okText:(0,u.langCheck)("10180TM-000015","pages",a),cancelText:(0,u.langCheck)("10180TM-000016","pages",a),visible:t,onCancel:this.hideModal,maskClosable:!1,footer:null,centered:!0,className:"viewPageTem"},d.default.createElement("div",{className:"printContent"})))}}]),t}(i.Component);g.propTypes={json:c.default.object.isRequired,templatePk:c.default.string.isRequired},t.default=(0,p.connect)(function(e){return{json:e.TemplateSettingData.json,templatePk:e.TemplateSettingData.templatePk}},{})(g)},1246:function(e,t,a){var n=a(1247);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(16)(n,o);n.locals&&(e.exports=n.locals)},1247:function(e,t,a){var n=a(143);(e.exports=a(14)(!1)).push([e.i,"body{background-color:#f0f2f5}*{box-sizing:border-box}.nc-workbench-templateSetting .nc-workbench-ownpage-left{padding-top:60px;height:100%}.nc-workbench-templateSetting .nc-workbench-ownpage-left .templateSetting-searchTree{padding:10px 20px;height:100%}.nc-workbench-templateSetting .nc-workbench-ownpage-left .templateSetting-searchTree .fixed-search-input{position:absolute;top:0;left:0;padding:20px 20px 10px;width:100%;display:flex;z-index:1}.nc-workbench-templateSetting .nc-workbench-ownpage-left .templateSetting-searchTree .fixed-search-input .sider-search-color .ant-input-search-icon{color:#e14c46;vertical-align:middle}.nc-workbench-templateSetting .nc-workbench-ownpage-right .templateTree-wrap{height:100%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .templateTree{height:calc(100% - 40px);overflow-y:auto;margin-left:20px}.nc-workbench-templateSetting .nc-workbench-ownpage-right .template-title{height:30px;font-size:15px;line-height:30px;padding-left:20px;margin-bottom:10px;background:#f4f4f4}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPageData .noDataTip{background:url("+n(a(1009))+") no-repeat 50%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPrintData .noDataTip{background:url("+n(a(1010))+") no-repeat 50%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noData .noDataTip{background:url("+n(a(1011))+") no-repeat 50%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noData,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPageData,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPrintData{width:100%;height:100%;align-items:center;justify-content:center;display:flex}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noData .noDataTip,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPageData .noDataTip,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPrintData .noDataTip{height:120px;line-height:280px;font-size:14px;color:#888;background-size:contain;text-align:center}.nc-workbench-templateSetting .ant-tree li .ant-tree-node-content-wrapper.ant-tree-node-selected{color:#e14c46}.ant-dropdown ul.ant-dropdown-menu li.ant-dropdown-menu-item .dropdown-item{-moz-text-align-last:center;text-align-last:center;font-size:13px;width:100%;border:none;outline:none}.ant-dropdown ul.ant-dropdown-menu li.ant-dropdown-menu-item .dropdown-item:focus{border:none}.ant-dropdown ul.ant-dropdown-menu li.u-dropdown-menu-item-disabled .dropdown-item{color:#ccc}.ant-dropdown ul.ant-dropdown-menu li.ant-dropdown-menu-item:hover{background-color:#ebecf0}.nc-dropdown.u-dropdown .u-dropdown-menu{padding:4px 0}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item{height:32px;line-height:32px;padding:0 10px;margin:0}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item .dropdown-item{-moz-text-align-last:center;text-align-last:center;font-size:13px;width:100%;border:none;outline:none}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item .dropdown-item:focus{border:none}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item-disabled{color:#909090}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item-disabled:hover{background-color:transparent;color:#909090}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item-selected{background-color:transparent}.copy-others-moudle .copy-others-modal-top{margin:4px 15px;position:relative}.copy-others-moudle .copy-others-modal-top .copy-others-modal-header{width:65px;height:21px;display:inline-block;font-size:13px;font-family:MicrosoftYaHei;color:#555;line-height:21px}.copy-others-moudle .copy-others-modal-top .copy-others-input{margin-left:8px;height:30px;font-size:13px;font-family:MicrosoftYaHei;color:#111;line-height:30px}.copy-others-moudle .copy-others-modal-top .areaCode-errorMsg,.copy-others-moudle .copy-others-modal-top .areaName-errorMsg{color:#f5222d;font-size:13px;position:absolute;top:30px;left:72px}.copy-others-moudle .copy-others-modal-bottom{overflow:hidden;margin-top:20px;display:flex}.copy-others-moudle .copy-others-modal-bottom .left{width:45%;border:1px solid #d0d0d0}.copy-others-moudle .copy-others-modal-bottom .left .title{background-color:#f3f3f3;padding:6px 15px;color:#111}.copy-others-moudle .copy-others-modal-bottom .left .search{margin:10px}.copy-others-moudle .copy-others-modal-bottom .left .leftTree{overflow:auto;height:275px}.copy-others-moudle .copy-others-modal-bottom .left .leftTree .ant-tree{overflow:none}.copy-others-moudle .copy-others-modal-bottom .middle{display:flex;justify-content:center;align-items:center;margin:0 auto;width:10%}.copy-others-moudle .copy-others-modal-bottom .right{width:45%;border:1px solid #d0d0d0}.copy-others-moudle .copy-others-modal-bottom .right .title{background-color:#f3f3f3;padding:6px 15px;color:#111}.copy-others-moudle .copy-others-modal-bottom .right .rightTree{overflow:auto;height:325px}.copy-others-moudle .copy-others-modal-bottom .right .rightTree .ant-tree{overflow:none}.tree-transfer-buttons{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:8px}.tree-transfer-buttons .u-button{padding:0;width:32px;height:32px;min-width:32px;border-radius:3px}.tree-transfer-buttons .u-button:after{display:none!important}.tree-transfer-buttons .iconfont{font-size:12px}.tree-transfer-buttons .transfer-left-double,.tree-transfer-buttons .transfer-right-double{position:relative}.tree-transfer-buttons .transfer-left-double .transfer-icon-1,.tree-transfer-buttons .transfer-left-double .transfer-icon-2,.tree-transfer-buttons .transfer-right-double .transfer-icon-1,.tree-transfer-buttons .transfer-right-double .transfer-icon-2{position:absolute}.tree-transfer-buttons .transfer-left-double .transfer-icon-1,.tree-transfer-buttons .transfer-right-double .transfer-icon-1{left:6px}.tree-transfer-buttons .transfer-left-double .transfer-icon-2,.tree-transfer-buttons .transfer-right-double .transfer-icon-2{right:6px}.margin-top-8{margin-top:8px}.margin-top-25{margin-top:25px}.ant-modal-body{padding:8px}",""])},869:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_(a(35)),o=_(a(13)),r=_(a(4)),l=_(a(7)),s=_(a(3)),i=_(a(5)),d=a(1),c=_(d),p=_(a(0)),u=a(28),f=a(922),m=a(878),h=_(a(26)),g=_(a(54)),T=a(110),y=_(a(919)),k=_(a(1001)),v=_(a(1240)),C=_(a(1241)),b=_(a(1005)),D=_(a(1243)),w=_(a(1244)),x=_(a(1245)),E=a(93),S=a(18),N=a(975),P=_(a(886)),M=a(195),R=_(a(889)),A=_(a(32)),K=a(1008);function _(e){return e&&e.__esModule?e:{default:e}}a(1246);var j=A.default.base,V=j.NCDiv,O=j.NCButton,q=(j.NCUpload,j.NCMenu),I=j.NCDropdown,L=function(e){function t(e){(0,r.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.setCopyVisible=function(e){a.setState({visible:e})},a.setCopyOthersVisible=function(e){a.setState({copyOthersModalVisible:e})},a.setReNameModal=function(e){a.setState({reNameModal:e})},a.menuFun=function(){var e=a.props,t=e.json,n=!1;return"y"===e.isDefaultTem&&(n=!0),c.default.createElement(q,{onClick:a.settingClick.bind(a)},c.default.createElement(q.Item,{key:"setDefault",disabled:n,fieldid:"setDefault"},c.default.createElement("div",{className:"dropdown-item"},(0,S.langCheck)("10180TM-000033","pages",t))),c.default.createElement(q.NCDivider,null),c.default.createElement(q.Item,{key:"cancelDefault",disabled:!n,fieldid:"cancelDefault"},c.default.createElement("div",{className:"dropdown-item"},(0,S.langCheck)("10180TM-000034","pages",t))))},a.settingClick=function(e){var t=a.props,n=t.templatePk,o=t.pageCode,r=t.appCode,l=t.json,s={templateId:n,pageCode:o,appCode:r},i=e.key;if(n){var d=void 0;switch(i){case"setDefault":d="/nccloud/platform/template/setDefaultTemplate.do",a.setDefaultFun(d,s,(0,S.langCheck)("10180TM-000033","pages",l));break;case"cancelDefault":d="/nccloud/platform/template/cancelDefaultTemplate.do",a.setDefaultFun(d,s,(0,S.langCheck)("10180TM-000034","pages",l))}}else(0,g.default)({status:"warning",msg:(0,S.langCheck)("10180TM-000035","pages",l)})},a.handleClick=function(e){var t=a.props,n=t.def1,o=t.templatePk,r=t.appCode,l=t.json,s=t.pageCode,i={templateId:o},d=window.location.protocol||"http:";if(o)switch(e){case"copy":a.setState({visible:!0});break;case"edit":if("menuitem"===n){var c={appcode:r,templateid:o};a.ajaxFun(c,"/nccloud/platform/template/edittemplate.do",function(e){window.location.href="uclient://start/"+d+"//"+location.hostname+(location.port?":"+location.port:"")+e.data})}else(0,E.openPage)("ZoneSetting",!1,{templetid:o,status:"templateSetting",appcode:r,pcode:s});break;case"delete":var p=void 0;"menuitem"===n?p="/nccloud/platform/template/deletePrintTemplate.do":"apppage"===n&&(p="/nccloud/platform/template/deleteTemplateDetail.do"),(0,T.ControlTip)({status:"warning",title:(0,S.langCheck)("10180TM-000036","pages",l),msg:(0,S.langCheck)("10180TM-000037","pages",l),fieldid:"delete",onOk:function(){a.ajaxFun(i,p,function(e){(0,g.default)({status:"success",msg:e.msg}),a.reqTreeTemData()})}});break;case"assign":a.setState({alloVisible:!0});break;case"browse":"menuitem"===n?a.showModal():a.setState({batchSettingModalVisibel:!0});break;case"copyOthersApp":a.setState({copyOthersModalVisible:!0});break;case"rename":a.setState({reNameModal:!0});break;case"export":var u={pagecode:s,appcode:r,pk_org:null};(0,K.handleDownload)(u,"/nccloud/platform/appregister/templetexport.do",1,"_blank",(0,S.langCheck)("10180TM-000062","pages",l),(0,S.langCheck)("10180TM-000063","pages",l))}else(0,g.default)({status:"warning",msg:(0,S.langCheck)("10180TM-000035","pages",l)})},a.ajaxFun=function(e,t,a,n,o){(0,h.default)({url:t,data:e,info:{name:"",action:""},success:function(e){var t=e.data;t.success&&(n?n&&"function"==typeof n?a(t,n):(n||o)&&a(t,n,o):a(t))}})},a.setDefaultFun=function(e,t,n){var o=a.props,r=o.def1,l=o.parentIdcon,s=o.json,i=o.appCode,d=o.pageCode;"apppage"===r?t.templateType="bill":"menuitem"===r&&(n===(0,S.langCheck)("10180TM-000034","pages",s)?(t.pageCode&&delete t.pageCode,e="/nccloud/platform/template/cancelDefaultPrintTemplate.do"):n===(0,S.langCheck)("10180TM-000033","pages",s)&&(t.parentId=l,e="/nccloud/platform/template/setDefaultPrintTemplate.do"),t.templateType&&delete t.templateType),a.ajaxFun(t,e,function(e){(0,g.default)({status:"success",msg:e.msg}),localStorage.removeItem("appTempletStorage_"+i+"_"+d),a.reqTreeTemData("setDefault")})},a.componentWillMount=function(){(0,M.getMulti)({moduleId:"10180TM",domainName:"workbench",callback:function(e){a.props.setJson(e)}})},a.componentDidMount=function(){var e=a.props,t=e.selectedKeys,n=e.setSelectedKeys,o=e.def1,r=e.expandedKeys,l=e.setExpandedKeys,s=e.appCode,i=e.pageCode,d=e.setAppCode,c=e.setPageCode,p=e.expandedTemKeys,u=e.setExpandedTemKeys,m=e.selectedTemKeys,h=e.setSelectedTemKeys,g=e.searchValue,T=e.setSearchValue;""!==o?(g?a.handleSearch(g,a.handleExpanded):a.reqTreeData(),n(t),(0,f.setDef1)(o),l(r),d(s),c(i),a.reqTreeTemData("historyData"),u(p),h(m)):a.param&&a.param.fourAppCode&&a.param.code&&"equiptool"===a.param.pageName?(T(a.param.fourAppCode),a.handleSearch(a.param.fourAppCode,a.handleExpanded,a.selectedFun)):a.reqTreeData(a.setInformationFun)},a.setInformationFun=function(e){var t=a.props,n=t.setSelectedKeys,o=t.setDef1,r=t.setAppCode,l=t.setPageCode;e&&e.length>0&&(n([e[0].pk]),o(e[0].def1),r(e[0].appCode),e[0].pageCode&&l(e[0].pageCode))},a.handleExpanded=function(e){var t=e.map(function(e,t){return e.pk});t.push("00"),a.props.setExpandedKeys(t),a.setState({autoExpandParent:!0})},a.handleSearch=function(e,t,n){if(e){(0,S.DeferFn)(function(){a.ajaxFun({search_content:e,containAppPage:!0},"/nccloud/platform/appregister/searchappmenuitem.do",function(e){a.props.setTreeData(e.data),t(e.data),n&&"function"==typeof n&&n(e.data)})})}},a.selectedFun=function(e){if(e&&e.length>0){var t=a.props,n=t.setSelectedKeys,o=t.setDef1,r=t.setAppCode,l=t.setPageCode,s=e.find(function(e){return e.code===a.param.code});n([s.pk]),o(s.def1),r(s.appCode),s.code&&l(s.code),a.reqTreeTemData()}},a.restoreTreeTemData=function(e,t){var o=a.state,r=o.treeTemBillData,l=o.treeTemPrintData,s=a.props,i=s.def1,d=s.expandedTemKeys,c=s.copyId,p=s.templatePk,u=s.json,f=s.setIsDefaultTem,m=[],h=void 0,g=a.props.treeTemBillData,T=a.props.treeTemPrintData;"bill"===e?h=(0,N.generateTemData)(g):"print"===e&&(h=(0,N.generateTemData)(T));var y=h,k=y.treeArray,v=y.treeObj;if(k.map(function(e){for(var t in v)v.hasOwnProperty(t)&&e.templateId===v[t][0].parentId&&e.children.push(v[t][0])}),m=h.treeArray,m=(0,N.generateTreeData)(m),"bill"===e){if("apppage"===i)if(m.length>0){if(t)t&&"copy"===t?m.map(function(e){e.children&&e.children.length>0&&e.children.map(function(e){if(c===e.key){var t=[].concat((0,n.default)(d),[e.parentId]);a.props.setExpandedTemKeys(t)}})}):t&&"setDefault"===t&&m.map(function(e){e.children&&e.children.length>0&&e.children.map(function(e){p===e.key&&f(e.isDefault)})});else{var C=[];C.push(m[0].key),a.props.setSelectedTemKeys(C),a.props.setParentIdcon(m[0].parentId),a.props.setTemplatePk(m[0].pk),a.props.setTemplateNameVal(m[0].name)}m.forEach(function(e){e.children&&e.children.length>0&&e.children.map(function(e){"y"===e.isDefault&&(e.name=e.name+(0,S.langCheck)("10180TM-000038","pages",u))})})}else a.props.setParentIdcon("");r=m,a.setState({treeTemBillData:r})}else if("print"===e){if("menuitem"===i)if(m.length>0){if(t)t&&"copy"===t?m.map(function(e){e.children&&e.children.length>0&&e.children.map(function(e){if(c===e.key){var t=[].concat((0,n.default)(d),[e.parentId]);a.props.setExpandedTemKeys(t)}})}):t&&"setDefault"===t&&m.map(function(e){e.children&&e.children.length>0&&e.children.map(function(e){p===e.key&&f(e.isDefault)})});else{var b=[];b.push(m[0].key),a.props.setSelectedTemKeys(b),a.props.setTemplatePk(m[0].pk),a.props.setParentIdcon(m[0].parentId),a.props.setTemplateNameVal(m[0].name),a.props.setTemplateTitleVal(m[0].code)}m.forEach(function(e){e.children&&e.children.length>0&&e.children.map(function(e){"y"===e.isDefault&&(e.name=e.name+(0,S.langCheck)("10180TM-000038","pages",u))})})}else a.props.setParentIdcon("");l=m,a.setState({treeTemPrintData:l})}},a.onSelectQuery=function(e,t){var n=a.props.selectedKeys;e.length>0?(a.props.setSelectedKeys(e),a.props.setDef1(t.selectedNodes[0].props.refData.def1),a.props.setAppCode(t.selectedNodes[0].props.refData.appCode),a.props.setPageCode(t.selectedNodes[0].props.refData.code),a.setState({autoExpandParent:!0},a.reqTreeTemData)):n&&a.reqTreeTemData()},a.reqTreeTemData=function(e){var t=a.props,n=t.def1,o={pageCode:t.pageCode,appCode:t.appCode};o.pageCode&&("apppage"===n?(o.templateType="bill",a.reqTreeTemAjax(o,"bill",e)):"menuitem"===n&&(o.pageCode&&delete o.pageCode,o.templateType="print",a.reqTreeTemAjax(o,"print",e)))},a.reqTreeTemAjax=function(e,t,n){var o=a.props.selectedTemKeys,r=a;a.ajaxFun(e,"/nccloud/platform/template/getTemplatesOfPage.do",function(e){e.data.length>0&&r.setState({saveLeftArrTS:e.data}),"bill"===t?(a.props.setTreeTemBillData(e.data),a.restoreTreeTemData(t,n)):"print"===t&&(a.props.setTreeTemPrintData(e.data),a.restoreTreeTemData(t,n),o&&e.data&&e.data.length&&e.data.map(function(e,t){e.templateId===o[0]&&a.props.setNodeKey(e.nodeKey)}))},t,n)},a.onTemSelect=function(e,t){var n=a.props,o=n.def1,r=n.setIsDefaultTem;if("apppage"===o||"menuitem"===o&&(e.length>0?a.props.setNodeKey(t.selectedNodes[0].props.refData.nodeKey):t.node.props&&t.node.props.refData&&t.node.props.refData.nodeKey&&a.props.setNodeKey(t.node.props.refData.nodeKey)),e.length>0){var l=t.selectedNodes[0].props.refData.name,s=l.indexOf((0,S.langCheck)("10180TM-000038","pages",a.props.json));-1!==s&&(l=l.slice(0,s)),a.props.setSelectedTemKeys(e),a.props.setTemplatePk(e[0]),a.props.setParentIdcon(t.selectedNodes[0].props.refData.parentId),a.props.setTemplateNameVal(l),a.props.setTemplateTitleVal(t.selectedNodes[0].props.refData.code),r(t.selectedNodes[0].props.refData.isDefault)}},a.reqTreeData=function(e){a.ajaxFun({},"/nccloud/platform/appregister/querymenuitemstree.do",function(e,t){e.success&&e.data.length>0&&(a.props.setTreeData(e.data),t&&"function"==typeof t&&t(e.data))},e)},a.setModalVisibel=function(e){a.setState({batchSettingModalVisibel:e})},a.setAssignModalVisible=function(e){a.setState({alloVisible:e})},a.showModal=function(){a.setState({previewPrintVisible:!0})},a.hideModal=function(e){a.setState({previewPrintVisible:e})},a.switchPageTem=function(){var e=a.state,t=e.treeTemBillData,n=e.treeTemPrintData,o=a.props.json;switch(a.props.def1){case"apppage":return c.default.createElement(C.default,{type:"bill",dataSource:t,langDataTitle:(0,S.langCheck)("10180TM-000039","pages",o),langNoDataTitle:(0,S.langCheck)("10180TM-000040","pages",o),onSelectQuery:a.onTemSelect});case"menuitem":return c.default.createElement(C.default,{type:"print",dataSource:n,langDataTitle:(0,S.langCheck)("10180TM-000041","pages",o),langNoDataTitle:(0,S.langCheck)("10180TM-000042","pages",o),onSelectQuery:a.onTemSelect});default:return c.default.createElement("div",{className:"noData"},c.default.createElement("p",{className:"noDataTip"},(0,S.langCheck)("10180TM-000043","pages",o)))}},a.menuBtnLoad=function(){var e=a.props,t=e.def1,n=e.parentIdcon,o=e.json;return n&&"root"!==n&&t&&c.default.createElement(I,{overlay:a.menuFun(),trigger:["click"],fieldid:"setDefault"},c.default.createElement(O,{key:"",className:"margin-left-10",fieldid:"setDefault"},(0,S.langCheck)("10180TM-000044","pages",o),c.default.createElement("i",{class:"arrow iconfont icon-hangcaozuoxiala1",style:{fontSize:13}})))},a.beforeUpload=function(e){var t=a.props.json;return!(!e||"application/json"!==e.type)||((0,g.default)({status:"error",msg:(0,S.langCheck)("10180TM-000064","pages",t)}),!1)},a.ncUploadChange=function(e){var t=a.props.json;"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(console.log(e.file.name+" file uploaded successfully"),(0,g.default)({status:"success",msg:(0,S.langCheck)("10180TM-000060","pages",t)}),a.reqTreeTemData()):"error"===e.file.status&&((0,g.default)({status:"error",msg:(0,S.langCheck)("10180TM-000061","pages",t)}),console.log(e.file.name+" file upload failed."))},a.param=(0,S.GetQuery)(a.props.location.search),a.state={siderHeight:"280",autoExpandTemParent:!0,treeTemBillData:[],treeTemPrintData:[],visible:!1,alloVisible:!1,batchSettingModalVisibel:!1,previewPrintVisible:!1,copyOthersModalVisible:!1,reNameModal:!1,saveLeftArrTS:[]},a}return(0,i.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.alloVisible,o=t.batchSettingModalVisibel,r=t.previewPrintVisible,l=t.copyOthersModalVisible,s=t.reNameModal,i=this.props,d=i.def1,p=i.templatePk,u=i.parentIdcon,f=i.json,h=[{name:(0,S.langCheck)("10180TM-000066","pages",f),type:"primary",code:"export",fieldid:"export",isshow:!1},{name:(0,S.langCheck)("10180TM-000045","pages",f),code:"edit",fieldid:"edit",isshow:d&&"root"!==u&&u},{name:(0,S.langCheck)("10180TM-000036","pages",f),code:"delete",fieldid:"delete",isshow:d&&"root"!==u&&u},{name:(0,S.langCheck)("10180TM-000046","pages",f),type:"primary",code:"copy",fieldid:"copy",isshow:"menuitem"==d&&""!==u},{name:(0,S.langCheck)("10180TM-000046","pages",f),type:"primary",code:"copy",fieldid:"copy",isshow:"apppage"==d&&""!==u,divide:"btn"},{name:(0,S.langCheck)("10180TM-000055","pages",f),type:"primary",code:"copyOthersApp",dropdownFieldid:"copy",fieldid:"copyOthersApp",isshow:"apppage"==d&&""!==u,divide:"select"},{name:(0,S.langCheck)("10180TM-000056","pages",f),code:"rename",fieldid:"rename",isshow:"apppage"==d&&""!==u},{name:(0,S.langCheck)("10180TM-000047","pages",f),code:"assign",fieldid:"assign",isshow:d&&"root"!==u&&u},{name:(0,S.langCheck)("10180TM-000048","pages",f),code:"browse",fieldid:"browse",isshow:d&&""!==u}],g=(0,S.GetQuery)(window.location.hash).c;return c.default.createElement(m.PageLayout,{className:"nc-workbench-templateSetting",header:c.default.createElement(m.PageLayoutHeader,null,c.default.createElement("div",{className:"header_in_icon"},c.default.createElement(R.default,{appCode:g}),c.default.createElement(V,{fieldid:(0,S.langCheck)("10180TM-000049","pages",f),areaCode:V.config.Title},(0,S.langCheck)("10180TM-000049","pages",f))),c.default.createElement("div",{style:{display:"flex"}},!1,c.default.createElement(P.default,{dataSource:h,onClick:this.handleClick}),this.menuBtnLoad()))},c.default.createElement(m.PageLayoutLeft,null,c.default.createElement(v.default,{onSelect:this.reqTreeTemData,reqTreeData:this.reqTreeData,setInforFun:this.setInformationFun,handleSearch:this.handleSearch,handleExpanded:this.handleExpanded})),c.default.createElement(m.PageLayoutRight,null,this.switchPageTem(),o&&c.default.createElement(y.default,{previewVisibel:o,setModalVisibel:this.setModalVisibel,templetData:{pagecode:this.props.pageCode,appcode:this.props.appCode,templetid:p}}),l&&c.default.createElement(D.default,{copyOthersModalVisible:l,setCopyOthersVisible:this.setCopyOthersVisible,reqTreeTemData:this.reqTreeTemData}),a&&c.default.createElement(b.default,{json:this.props.json,visible:a,setCopyVisible:this.setCopyVisible,onCopy:function(){return e.reqTreeTemData("copy")}}),s&&c.default.createElement(w.default,{reNameModalVisible:s,setReNameModal:this.setReNameModal,reqTreeTemData:this.reqTreeTemData,saveLeftArrTS:this.state.saveLeftArrTS}),r&&c.default.createElement(x.default,{previewPrintVisible:r,hideModal:this.hideModal}),n&&c.default.createElement(k.default,{json:this.props.json,alloVisible:n,setAssignModalVisible:this.setAssignModalVisible})))}}]),t}(d.Component);L.propTypes={treeData:p.default.array.isRequired,setTreeData:p.default.func.isRequired,setExpandedKeys:p.default.func.isRequired,setDef1:p.default.func.isRequired,setSelectedTemKeys:p.default.func.isRequired,setTreeTemBillData:p.default.func.isRequired,setTreeTemPrintData:p.default.func.isRequired,setSearchValue:p.default.func.isRequired,setPageCode:p.default.func.isRequired,setAppCode:p.default.func.isRequired,setCopyId:p.default.func.isRequired,setIsDefaultTem:p.default.func.isRequired,setParentIdcon:p.default.func.isRequired,setNodeKey:p.default.func.isRequired,setTemplateNameVal:p.default.func.isRequired,setJson:p.default.func.isRequired,selectedKeys:p.default.array.isRequired,expandedKeys:p.default.array.isRequired,treeTemBillData:p.default.array.isRequired,treeTemPrintData:p.default.array.isRequired,def1:p.default.string.isRequired,templatePk:p.default.string.isRequired,searchValue:p.default.string.isRequired,pageCode:p.default.string.isRequired,appCode:p.default.string.isRequired,parentIdcon:p.default.string.isRequired,nodeKey:p.default.array.isRequired,copyId:p.default.string.isRequired,expandedTemKeys:p.default.array.isRequired,json:p.default.object.isRequired,isDefaultTem:p.default.string.isRequired},t.default=(0,u.connect)(function(e){return{treeData:e.TemplateSettingData.treeData,treeTemBillData:e.TemplateSettingData.treeTemBillData,treeTemPrintData:e.TemplateSettingData.treeTemPrintData,selectedKeys:e.TemplateSettingData.selectedKeys,expandedKeys:e.TemplateSettingData.expandedKeys,def1:e.TemplateSettingData.def1,selectedTemKeys:e.TemplateSettingData.selectedTemKeys,templatePk:e.TemplateSettingData.templatePk,searchValue:e.TemplateSettingData.searchValue,pageCode:e.TemplateSettingData.pageCode,appCode:e.TemplateSettingData.appCode,parentIdcon:e.TemplateSettingData.parentIdcon,nodeKey:e.TemplateSettingData.nodeKey,copyId:e.TemplateSettingData.copyId,expandedTemKeys:e.TemplateSettingData.expandedTemKeys,json:e.TemplateSettingData.json,isDefaultTem:e.TemplateSettingData.isDefaultTem}},{setTreeData:f.setTreeData,setTreeTemBillData:f.setTreeTemBillData,setTreeTemPrintData:f.setTreeTemPrintData,setExpandedKeys:f.setExpandedKeys,setSelectedKeys:f.setSelectedKeys,setDef1:f.setDef1,setSelectedTemKeys:f.setSelectedTemKeys,setExpandedTemKeys:f.setExpandedTemKeys,setTemplateNameVal:f.setTemplateNameVal,setTemplateTitleVal:f.setTemplateTitleVal,setTemplatePk:f.setTemplatePk,setSearchValue:f.setSearchValue,setPageCode:f.setPageCode,setAppCode:f.setAppCode,setParentIdcon:f.setParentIdcon,setNodeKey:f.setNodeKey,setCopyId:f.setCopyId,setJson:f.setJson,setIsDefaultTem:f.setIsDefaultTem})(L)},878:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageLayoutRight=t.PageLayoutLeft=t.PageLayoutHeader=t.PageScrollLayout=t.PageLayout=void 0;var n,o,r,l,s,i,d,c,p,u,f=C(a(13)),m=C(a(4)),h=C(a(7)),g=C(a(3)),T=C(a(5)),y=a(1),k=C(y),v=C(a(0));function C(e){return e&&e.__esModule?e:{default:e}}a(879);var b=C(a(32)).default.base.NCDiv,D=!1,w=(o=n=function(e){function t(e){(0,m.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return a.handleMouseUp=function(){D=!1},a.handleMouseMove=function(e){if(D){var t=e.clientX,a=document.querySelector("#layoutLeft"),n=a.getBoundingClientRect().left,o=parseInt(t-n)+3;o<200||(a.style.width=o+"px")}},a}return(0,T.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){return k.default.createElement("div",{className:"nc-workbench-page"},this.props.header?this.props.header:null,k.default.createElement("div",{onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,className:"nc-workbench-ownpage "+(2===this.props.children.length?"nc-workbench-ownpage-all":"")+" "+this.props.className},this.props.children))}}]),t}(y.Component),n.defaultProps={className:""},o),x=(l=r=function(e){function t(e){(0,m.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return a.handleMouseUp=function(){D=!1},a.handleMouseMove=function(e){if(D){var t=e.clientX,a=document.querySelector("#layoutLeft"),n=a.getBoundingClientRect().left,o=parseInt(t-n)+3;o<200||(a.style.width=o+"px")}},a.handleScroll=function(e){var t=a.refs.ncWorkbenchPageScroll.getBoundingClientRect(),n=t.y;t.width;if(n==a.initScrollContainerTop&&a.setState({suck:!1}),n<a.initScrollContainerTop){if(a.state.suck)return;a.containerWidthChange(),a.setState({suck:!0})}},a.containerWidthChange=function(){var e=a.refs.ncWorkbenchPageOwnpage.getBoundingClientRect().width;document.getElementsByClassName("nc-workbench-page-header")[0].style.width=e+"px",document.getElementById("suckTableHeader")&&(document.getElementById("suckTableHeader").style.width=e+"px")},a.state={suck:!1},a.initScrollContainerTop,a}return(0,T.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.containerWidthChange);var e=this.refs.ncWorkbenchPageScroll.getBoundingClientRect().y;this.initScrollContainerTop=e}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.containerWidthChange)}},{key:"render",value:function(){var e=this.state.suck;return k.default.createElement("div",{className:"nc-workbench-page-scroll",onScroll:this.handleScroll},k.default.createElement("div",{className:" nc-workbench-page "},k.default.createElement("div",{className:"nc-workbench-page-container "+(e?"nc-workbench-suck":""),ref:"ncWorkbenchPageScroll"},this.props.header?this.props.header:null,k.default.createElement("div",{onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,ref:"ncWorkbenchPageOwnpage",className:"nc-workbench-ownpage "+(2===this.props.children.length?"nc-workbench-ownpage-all":"")+" "+this.props.className},this.props.children))))}}]),t}(y.Component),r.defaultProps={className:""},l),E=(i=s=function(e){function t(e){(0,m.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return a.handleMouseDown=function(){D=!0},a}return(0,T.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){return k.default.createElement("div",{id:"layoutLeft",className:"nc-workbench-ownpage-left "+this.props.className},k.default.createElement("span",{className:"layout-drag-block",onMouseDown:this.handleMouseDown}),this.props.children)}}]),t}(y.Component),s.defaultProps={className:""},i),S=(c=d=function(e){function t(e){return(0,m.default)(this,t),(0,g.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e))}return(0,T.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){return k.default.createElement(b,{areaCode:b.config.HEADER,className:"nc-workbench-page-header "+this.props.className},this.props.children)}}]),t}(y.Component),d.defaultProps={className:""},c),N=(u=p=function(e){function t(){return(0,m.default)(this,t),(0,g.default)(this,(t.__proto__||(0,f.default)(t)).apply(this,arguments))}return(0,T.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){return k.default.createElement("div",{className:"nc-workbench-ownpage-right "+this.props.className},this.props.children)}}]),t}(y.Component),p.defaultProps={className:""},u);w.propTypes={children:v.default.any.isRequired},E.propTypes={children:v.default.any.isRequired},N.propTypes={children:v.default.any.isRequired},t.PageLayout=w,t.PageScrollLayout=x,t.PageLayoutHeader=S,t.PageLayoutLeft=E,t.PageLayoutRight=N},879:function(e,t,a){var n=a(880);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(16)(n,o);n.locals&&(e.exports=n.locals)},880:function(e,t,a){(e.exports=a(14)(!1)).push([e.i,'.nc-workbench-page{position:absolute;top:0;z-index:10;height:100%;width:100%;padding:8px 0 0;display:flex;flex-direction:column}.nc-workbench-page .nc-workbench-page-header{flex:0 0 45px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d9d9d9;border-radius:3px 3px 0 0;background:#fff;padding:0 20px}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn{font-size:16px;color:#111;font-weight:700}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn .iconfont{margin-right:6px;border-radius:50%;font-size:16px;padding:4px;font-weight:400;cursor:pointer}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn .iconfont:hover{background:#e8e8e8}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn span[type=ncdiv]{font-size:inherit}.nc-workbench-page .nc-workbench-page-header .header_in_icon{display:flex;font-weight:700;font-size:16px;color:#111;line-height:24px}.nc-workbench-page .nc-workbench-page-header .header_in_icon span[type=ncdiv]{font-size:inherit}.nc-workbench-page .nc-workbench-ownpage{min-width:800px;border-radius:0 0 3px 3px}.nc-workbench-page .nc-workbench-ownpage-all{height:100%;display:flex;justify-content:flex-start;background:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nc-workbench-page .nc-workbench-ownpage-left{position:relative;height:100%;min-width:280px}.nc-workbench-page .nc-workbench-ownpage-left .layout-drag-block{position:absolute;right:-3px;z-index:10;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);display:block;padding:0 3px;height:100%;border-radius:3px;cursor:w-resize}.nc-workbench-page .nc-workbench-ownpage-left .layout-drag-block:after{content:"";display:block;width:1px;height:100%;background:#d9d9d9}.nc-workbench-page .nc-workbench-ownpage-left .layout-drag-block:hover:after{width:2px;background:rgba(0,0,0,.54)}.nc-workbench-page .nc-workbench-ownpage-right{min-width:50%;flex:1}.nc-workbench-page-scroll{height:100%;width:100%;overflow-y:auto}.nc-workbench-page-scroll .nc-workbench-page-container{margin-top:0;min-height:100%;background:#fff;border-radius:3px}.nc-workbench-page-scroll .nc-workbench-page-container .nc-workbench-page-header{position:static;transition:top .7s ease;height:46px}.nc-workbench-page-scroll .nc-workbench-page-container .suck-table-header{position:static;transition:top .7s ease}.nc-workbench-page-scroll .nc-workbench-suck{padding-top:80px}.nc-workbench-page-scroll .nc-workbench-suck .nc-workbench-page-header{position:fixed;z-index:1;top:44px}.nc-workbench-page-scroll .nc-workbench-suck .suck-table-header{position:fixed;z-index:1;top:94px}@media screen and (min-width:1280px){.nc-workbench-page{padding:8px 16px 0}}@media screen and (min-width:1440px){.nc-workbench-page{padding:8px 16px 0}}@media screen and (min-width:1600px){.nc-workbench-page{padding:8px 16px 0}}',""])},882:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateAreaValidate=t.updateSaveFlag=t.setZoneDataFun=t.setCurrentBatchCell=t.updateBatchSource=t.setFormulaInfo=t.toggleFormula=t.clearData=t.updatePreviewData=t.updateSelectArea=t.updateAreaList=t.updateSelectCard=t.setZoneData=void 0;var n,o=a(6),r=(n=o)&&n.__esModule?n:{default:n},l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(429));t.setZoneData=function(e){return{type:l.ZONESETTING,data:e}},t.updateSelectCard=function(e){return{type:l.UPDATESELECTCARD,selectCard:e}},t.updateAreaList=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:l.UPDATEAREALIST,areaList:e,init:t}},t.updateSelectArea=function(e){return{type:l.UPDATESELECTAREA,selectedArea:e}},t.updatePreviewData=function(e){return{type:l.PREVIEWDATA,previewData:e}},t.clearData=function(){return{type:l.CLEARDATA}},t.toggleFormula=function(e,t){return{type:l.TOGGLEFORMULA,formula:(0,r.default)({},e,t)}},t.setFormulaInfo=function(e){return{type:l.SETFORMULAINFO,formulaInfo:e}},t.updateBatchSource=function(e){return{type:l.UPDATEBATCHSOURCE,batchSource:e}},t.setCurrentBatchCell=function(e){return{type:l.SETCURRENTBATCHCELL,currentBatchCell:e}},t.setZoneDataFun=function(e){return{type:l.SETZONEFORMFUN,getFromData:e}},t.updateSaveFlag=function(e){return{type:l.UPDATESAVEFLAG,isSave:e}},t.updateAreaValidate=function(e){return{type:l.SETAREAVALIDATE,validate:e}}},885:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTree=void 0;var n,o=a(90),r=(n=o)&&n.__esModule?n:{default:n};t.createTree=function(e,t,a){e=r.default.cloneDeep(e);var n=l(e,a),o=n.treeArray,d=n.treeObject;return d=s(d,t),i(o,d,t)};var l=function(e,t){var a=[],n={};return e.map(function(e,o){e[t]?n.hasOwnProperty(e[t])?n[e[t]].push(e):(n[e[t]]=[],n[e[t]].push(e)):a.push(e)}),{treeArray:a,treeObject:n}},s=function(e,t){for(var a in e)e.hasOwnProperty(a)&&(e[a]=i(e[a],e,t));return e},i=function(e,t,a){return e.map(function(e,n){return t.hasOwnProperty(e[a])&&(e.children=t[e[a]]),e})}},886:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(13)),o=c(a(4)),r=c(a(7)),l=c(a(3)),s=c(a(5)),i=a(1),d=c(i);function c(e){return e&&e.__esModule?e:{default:e}}a(887);var p=c(a(32)).default.base,u=p.NCButtonGroup,f=p.NCButton,m=p.NCMenu,h=p.NCDropdown,g=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.createBtn=function(e){return e.map(function(e){if(e.isshow){if("btn"==e.divide)return d.default.createElement(f,{className:"divide-btn",key:e.code,colors:e.type,fieldid:e.fieldid||e.code,onClick:function(){a.props.onClick(e.code)}},e.name);if("select"==e.divide){var t=d.default.createElement(m,{onClick:function(){a.props.onClick(e.code)}},d.default.createElement(m.Item,{key:"1",fieldid:e.fieldid||e.code},d.default.createElement("div",null,e.name)));return d.default.createElement(h,{overlay:t,trigger:["click"],fieldid:e.dropdownFieldid},d.default.createElement(f,{className:"margin-left-1",key:e.code,colors:e.type,fieldid:e.fieldid||e.code,is_arrow:!0,style:{minWidth:18}},d.default.createElement("i",{className:"iconfont icon-hangcaozuoxiala1"})))}return d.default.createElement(f,{className:"margin-left-6 "+(e.className?e.className:""),key:e.code,colors:e.type,fieldid:e.fieldid||e.code,onClick:function(){a.props.onClick(e.code)}},e.name)}return null})},a.createBtnGroup=function(e){return e.length>0?d.default.createElement(u,null,a.createBtn(e)):null},a.createButton=function(e){var t=e.filter(function(e){return e.group}),n=e.filter(function(e){return!e.group});return d.default.createElement("div",null,a.createBtn(n),d.default.createElement("div",{style:{marginLeft:6}},a.createBtnGroup(t)))},a}return(0,s.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){return d.default.createElement("div",{className:"buttons-component "+(this.props.className?this.props.className:"")},this.createButton(this.props.dataSource))}}]),t}(i.Component);t.default=g},887:function(e,t,a){var n=a(888);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(16)(n,o);n.locals&&(e.exports=n.locals)},888:function(e,t,a){(e.exports=a(14)(!1)).push([e.i,".buttons-component div{display:flex;align-items:center}.buttons-component .ant-btn-group{margin-left:6px}body .divide-btn{margin-left:6px;border-top-right-radius:0;border-bottom-right-radius:0}body .margin-left-1{margin-left:1px;width:18px;border-top-left-radius:0;border-bottom-left-radius:0;display:flex;justify-content:center;align-items:center;padding:0}body .margin-left-1 .iconfont{font-size:12px}",""])},889:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(1)),o=s(a(197)),r=s(a(422)),l=a(33);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.appCode,a=(0,l.getStore)("APPICONSSTORE"),s=a&&a[t],i=o.default[s]?o.default[s]:r.default;return n.default.createElement("div",{style:{width:"24px",height:"24px",marginRight:"10px",background:"url("+i+") no-repeat 0px 0px",backgroundSize:"contain"}})}},919:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=C(a(428)),o=C(a(137)),r=C(a(427)),l=C(a(13)),s=C(a(4)),i=C(a(7)),d=C(a(3)),c=C(a(5)),p=a(1),u=C(p),f=a(28),m=a(882),h=a(857),g=C(a(26)),T=a(18),y=a(195),k=C(a(419)),v=a(90);function C(e){return e&&e.__esModule?e:{default:e}}a(920);var b=function(e){function t(e){(0,s.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.showModalHidden=function(){a.props.setModalVisibel(!1)},a.createDom=function(){var e=a.props,t=e.editTable,n=e.form,o=e.search,r=n.createForm,l=t.createEditTable,s=o.NCCreateSearch,i=a.state.all_keys,d=[];return i.length&&i.map(function(e,t){switch(e.myAreaType){case"form":d.push(u.default.createElement("div",{className:"viewTemplateArea",key:"form"+t},u.default.createElement("div",{className:"descrip"},u.default.createElement("span",{key:"forms"+t}," ▼ "),""+e.name),r(e.id)));break;case"table":d.push(u.default.createElement("div",{className:"viewTemplateArea",key:"table"+t,ref:""+e.id},u.default.createElement("div",{className:"descrip"},u.default.createElement("span",{key:"tables"+t}," ▼ "),""+e.name),l(e.id,{})));break;case"search":d.push(u.default.createElement("div",{className:"viewTemplateArea",key:"search"+t},u.default.createElement("div",{className:"descrip"},u.default.createElement("span",{key:"searchs"+t}," ▼ "),""+e.name),s(e.id)))}}),d},a.state={all_keys:[],json:{}},a}return(0,c.default)(t,e),(0,i.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.previewData){var a=e.previewData,l=[],s=function(e,n){var o=n.moduletype,r=n.code,s=a.formrelation;"table"!==o&&"form"!==o&&"search"!==o||"form"===o&&s&&n.relationcode in s||l.push({id:r,name:n.name,myAreaType:o,position:n.position}),"form"===o&&t.props.form.setFormStatus(r,"edit"),"table"===o&&t.refs[r]&&setTimeout(function(){0==t.props.editTable.getNumberOfRows(r)&&t.props.editTable.addRow(r),t.refs[r]=null},10)},i=!0,d=!1,c=void 0;try{for(var p,u=(0,o.default)((0,n.default)(a));!(i=(p=u.next()).done);i=!0){var f=p.value,m=(0,r.default)(f,2);m[0];s(0,m[1])}}catch(e){d=!0,c=e}finally{try{!i&&u.return&&u.return()}finally{if(d)throw c}}l&&l[0]&&l[0].position&&(l=(0,v.sortBy)(l,function(e){return e.position})),this.setState({all_keys:l})}}},{key:"componentDidMount",value:function(){var e=this;(0,y.getMulti)({moduleId:"ZoneSetting",domainName:"workbench",callback:function(t){e.setState({json:t}),function(e){var t=this,a=this.props,n=a.requestUrl,o=a.requestData,r=a.templetData,l=r.pagecode,s=r.appcode,i=r.templetid,d=n||"/nccloud/platform/templet/querypage.do",c=o||{pagecode:l,appcode:s,templetid:i};Array.isArray(c)&&0==c.length||(0,g.default)({url:d,data:c,loading:!0,info:{name:(0,T.langCheck)("ZoneSetting-000028","pages",e),action:(0,T.langCheck)("ZoneSetting-000029","pages",e)},success:function(e){var a=e.data.data;a&&(t.props.meta.setMeta(a),o&&o.forEach(function(e){a[e.code]&&(a[e.code].position=e.position)}),t.props.updatePreviewData(a))}})}.call(e,t)}})}},{key:"render",value:function(){var e=this.state.json;return u.default.createElement(k.default,{maskClosable:!1,customHeader:(0,T.langCheck)("ZoneSetting-000121","pages",e),visible:this.props.previewVisibel,onOk:this.onOkDialog,onCancel:this.showModalHidden,width:"98%",className:"viewPageTem",centered:!0,footer:null,fieldid:"preview"},this.createDom())}}]),t}(p.Component);b=(0,h.createPage)({})(b),t.default=(0,f.connect)(function(e){return{areaList:e.zoneSettingData.areaList,previewData:e.zoneSettingData.previewData}},{updatePreviewData:m.updatePreviewData})(b)},920:function(e,t,a){var n=a(921);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(16)(n,o);n.locals&&(e.exports=n.locals)},921:function(e,t,a){(e.exports=a(14)(!1)).push([e.i,".viewPageTem .u-modal-content .u-modal-body{overflow:auto;padding:20px 0}.viewPageTem .u-modal-content .u-modal-body .printContent{padding:20px}.viewPageTem .u-modal-content .viewTemplateArea{padding:0 20px}",""])},922:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setIsDefaultTem=t.setJson=t.setRoleUserDatas=t.setRoCheckedObjArray=t.setCopyId=t.setNodeKey=t.setTemplateTitleVal=t.setTemplateNameVal=t.setParentIdcon=t.setAppCode=t.setPageCode=t.setSearchValue=t.setTemplatePk=t.setSelectedTemKeys=t.setSelectedKeys=t.setExpandedKeys=t.setExpandedTemKeys=t.setDef1=t.setTreeTemPrintData=t.setTreeTemBillData=t.setTreeData=t.clearData=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(442));t.clearData=function(){return{type:n.CLEARDATA}},t.setTreeData=function(e){return{type:n.SETTREEDATA,data:e}},t.setTreeTemBillData=function(e){return{type:n.SETTREETEMBILLDATA,data:e}},t.setTreeTemPrintData=function(e){return{type:n.SETTREETEMPRINTDATA,data:e}},t.setDef1=function(e){return{type:n.SETDEF1,data:e}},t.setExpandedTemKeys=function(e){return{type:n.EXPANDEDTEMKEYS,data:e}},t.setExpandedKeys=function(e){return{type:n.EXPANDEDKEYS,data:e}},t.setSelectedKeys=function(e){return{type:n.SELECTEDKEYS,data:e}},t.setSelectedTemKeys=function(e){return{type:n.SELECTEDTEMKEYS,data:e}},t.setTemplatePk=function(e){return{type:n.TEMPLATEPK,data:e}},t.setSearchValue=function(e){return{type:n.SEARCHVALUE,data:e}},t.setPageCode=function(e){return{type:n.PAGECODE,data:e}},t.setAppCode=function(e){return{type:n.APPCODE,data:e}},t.setParentIdcon=function(e){return{type:n.PARENTIDCON,data:e}},t.setTemplateNameVal=function(e){return{type:n.TEMPLATENAMEVAL,data:e}},t.setTemplateTitleVal=function(e){return{type:n.TEMPLATETITLEVAL,data:e}},t.setNodeKey=function(e){return{type:n.NODEKEY,data:e}},t.setCopyId=function(e){return{type:n.COPYID,data:e}},t.setRoCheckedObjArray=function(e){return{type:n.ROCHECKEDOBJARRAY,data:e}},t.setRoleUserDatas=function(e){return{type:n.ROLEUSERDATAS,data:e}},t.setJson=function(e){return{type:n.JSON,data:e}},t.setIsDefaultTem=function(e){return{type:n.ISDEFAULTTEM,data:e}}},957:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.conf=void 0;var n=s(a(196));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.default.createElement(i,(0,n.default)(d,e))};var o=s(a(1)),r=a(857),l=a(18);function s(e){return e&&e.__esModule?e:{default:e}}var i=r.high.Refer,d=t.conf={placeholder:(0,l.langCheck)("0000PUB-000052"),rootNode:{refname:(0,l.langCheck)("0000PUB-000052"),refpk:"root"},refType:"tree",refName:(0,l.langCheck)("0000PUB-000053"),refCode:"uapbd.org.BusinessUnitAndGroupTreeRef",queryTreeUrl:"/nccloud/uapbd/ref/BusinessUnitAndGroupTreeRef.do",treeConfig:{name:[(0,l.langCheck)("0000PUB-000032"),(0,l.langCheck)("0000PUB-000033")],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:{queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",refName:(0,l.langCheck)("0000PUB-000054"),rootNode:{refname:(0,l.langCheck)("0000PUB-000054"),refpk:"root"}},isShowUnit:!1}},975:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=a(196),r=(n=o)&&n.__esModule?n:{default:n};t.generateData=function(e){var t=[],a={};return e.map(function(e,n){var o=e.pid,r=e.code,l=e.name;e.appCode,e.pk,e.children&&delete e.children,e.text=r+" "+l,e.title=e.text,e.key=r,o?(a[o]||(a[o]=[]),a[o].push(e)):(e.children=[],t.push(e))}),{treeArray:t,treeObj:a}},t.generateTemData=function(e){var t=[],a={},n=[],o=[];return e.map(function(e,t){var a=e.templateId,r=(e.parentId,e.name),l=(e.type,e.code);e.children&&delete e.children,e.key=a,e.text=l+" "+r,e.pk=a,n.push(a),o.push(e)}),o.map(function(e){var o=e.templateId;e.parentId,e.name,e.type,e.code,n.includes(e.parentId)?(a[o]=[],a[o].push(e)):(e.children=[],t.push(e))}),{treeArray:t,treeObj:a}},t.generateRoData=function(e){var t=[];return e.map(function(e,a){var n=e.code,o=e.id,r=e.name;e.key=o,e.text=n+" "+r,e.title=e.text,t.push(e)}),t},t.generateTreeData=function e(t){return t.map(function(t,a){return(t=(0,r.default)({},t)).children?(t.isLeaf=!1,t.children=e(t.children)):t.isLeaf=!0,t})}}}]);