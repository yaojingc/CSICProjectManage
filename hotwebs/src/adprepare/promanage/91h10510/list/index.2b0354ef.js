!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("nc-lightapp-front"),require("react")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react"],e):"object"==typeof exports?exports["adprepare/promanage/91h10510/list/index"]=e(require("nc-lightapp-front"),require("react")):t["adprepare/promanage/91h10510/list/index"]=e(t["nc-lightapp-front"],t.React)}(window,function(t,e){return function(t){var e={};function a(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=t,a.c=e,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(o,n,function(e){return t[e]}.bind(null,n));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="../../../../",a(a.s=80)}({0:function(e,a){e.exports=t},1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.APPCODE="91H10510",e.BILL_TYPE_CODE="PROS",e.MULTILANG={moduleId:"91H10510",domainName:"adprepare"},e.LIST={page_title:"91H10510-000011",page_code:"91H10510_LIST",search_id:"list_query",table_id:"list_head",head_btn_code:"list_head",body_btn_code:"list_inner"},e.CARD={page_title:"91H10510-000011",page_code:"91H10510_CARD",form_id:"card_head",table_code:"card_body",table_edit_code:"card_body_edit",table_browse_code:"card_body_browse",head_btn_code:"card_head",shoulder_btn_code:"tabs_head",body_btn_code:"tabs_body"};var o=e.DATASOURCE="tm.fmc.cost.datasource",n=(e.SEARCH_CACHE={key:"tm.fmc.cost.SEARCH_CACHE",dataSource:o},e.CARD_CACHE={key:"tm.fmc.cost.CARD_CACHE",dataSource:o},e.base_path="/nccloud/adprepare/promanage/",e.REQUEST_URL={save:"/nccloud/adprepare/promanage/saveprojectstartHVO.do",delete:"/nccloud/adprepare/promanage/deleteprojectstartHVO.do",queryCard:"/nccloud/adprepare/promanage/querycardprojectstartHVO.do",queryList:"/nccloud/adprepare/promanage/querypageprojectstartHVO.do",queryListByPks:"/nccloud/adprepare/promanage/querypagebypkprojectstartHVO.do",commit:"/nccloud/adprepare/promanage/commitprojectstartHVO.do",unCommit:"/nccloud/adprepare/promanage/uncommitprojectstartHVO.do",toCard:"/card",toList:"/list"},e.LIST_BUTTON={create:"AddBtn",delete:"DelBtn",commit:"CommitBtn",unCommit:"UnCommitBtn",linkGroup:"JointBtn",attachment:"AttachmentBtn",approvalLink:"DetailBtn",billTrack:"TrackBtn",print:"PrintBtn",output:"OutputBtn",refresh:"RefreshBtn",bodyUpdate:"edit",bodyDelete:"delete",bodyCommit:"commit",bodyUnCommit:"unCommit",copy:"copy"}),r=(e.LIST_DISABLED_BUTTON=[n.delete,n.commit,n.unCommit,n.linkGroup,n.approvalLink,n.billTrack,n.attachment,n.print,n.output],e.CARD_BUTTON={save:"SaveBtn",saveAdd:"SaveAddBtn",saveCommit:"SaveCommitBtn",cancel:"CancelBtn",create:"CreateBtn",update:"UpdateBtn",delete:"DeleteBtn",copy:"CopyBtn",commit:"CommitBtn",unCommit:"UnCommitBtn",attachment:"AttachmentBtn",approvalLink:"DetailBtn",billTrack:"TrackBtn",print:"PrintBtn",output:"OutputBtn",refresh:"RefreshBtn",back:"Back",addRow:"addRow",deleteRow:"deleteRow",copyRows:"copyRows",pasteTail:"pasteTail",pasteCancel:"pasteCancel",expand:"expand",insertRow:"insertRow",delRow:"delRow",copyRow:"copyRow",fold:"fold",unfold:"unfold",pasteHere:"pasteHere"});e.CARD_DISABLED_BUTTON=[r.deleteRow,r.copyRows],e.CARD_ADD_DISABLED_BUTTON=[r.addRow,r.save,r.saveAdd,r.saveCommit],e.FIELD={org:"pk_org",billStatus:"billstatus",ts:"ts"},e.PRIMARY_KEY={head_id:"pk_projectstart_h",body_id:"pk_projectstart_b",bill_no:"billno",id:"id"},e.STATUS={status:"status",edit:"edit",browse:"browse",add:"add",info:"info",warning:"warning",success:"success",danger:"danger",NOSTATE:"-1",NOPASS:"0",PASSING:"1",GOINGON:"2",COMMIT:"3"}},33:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,n,r,s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},i=function(){function t(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,a,o){return a&&t(e.prototype,a),o&&t(e,o),e}}(),l=a(5),c=(r=l)&&r.__esModule?r:{default:r},u=a(0),d=a(34),p=a(36),T=a(37),f=a(38),S=a(1),_=a(6);function b(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var h=(o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.call(a),a.state={json:{},showUploader:!1,billInfo:{},compositeData:null,compositeDisplay:!1,curPk:null,showApproveDetail:!1,billId:null},a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l.Component),i(e,[{key:"componentWillMount",value:function(){var t=this;this.props.MultiInit.getMultiLang({moduleId:S.MULTILANG.moduleId,domainName:S.MULTILANG.domainName,callback:function(e,a,o){a&&(d.initTemplate.call(t,t.props),t.setState({json:e,inlt:o}))}})}},{key:"componentDidMount",value:function(){(0,u.cardCache.getDefData)(S.SEARCH_CACHE.key,S.SEARCH_CACHE.dataSource)?this.props.button.setDisabled(b({},S.LIST_BUTTON.refresh,!1)):this.props.button.setDisabled(b({},S.LIST_BUTTON.refresh,!0))}},{key:"render",value:function(){var t=this,e=this.props,a=e.table,o=e.search,n=a.createSimpleTable,r=o.NCCreateSearch,i=u.high.NCUploader,l=u.high.BillTrack,d=u.high.ApprovalTrans,T=u.high.ApproveDetail;return c.default.createElement("div",{className:"nc-bill-list"},c.default.createElement("div",{className:"nc-bill-header-area"},c.default.createElement("div",{className:"header-title-search-area"},(0,u.createPageIcon)(),c.default.createElement("h2",{className:"title-search-detail"},this.state.json[S.LIST.page_title])),c.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:S.LIST.head_btn_code,onButtonClick:p.buttonClick.bind(this)}))),c.default.createElement("div",{className:"nc-bill-search-area"},r(S.LIST.search_id,{clickSearchBtn:this.clickSearchBtn})),c.default.createElement("div",{className:"table-area"},n(S.LIST.table_id,{showCheck:!0,dataSource:S.SEARCH_CACHE.dataSource,pkname:S.PRIMARY_KEY.head_id,handlePageInfoChange:this.handlePageInfoChange,onRowDoubleClick:this.onRowDoubleClick,onSelected:this.clickSelectBtn,onSelectedAll:this.clickSelectAllBtn})),this.state.showUploader&&c.default.createElement(i,s({placement:"bottom"},this.state.billInfo,{onHide:function(){t.setState({showUploader:!1})}})),c.default.createElement(l,{show:this.state.showBillTrack,close:function(){t.setState({showBillTrack:!1})},pk:this.state.billTrackBillId,type:this.state.billTrackBillType}),this.state.compositeDisplay&&c.default.createElement(d,{title:this.state.json["91H10510-000018"],data:this.state.compositeData,display:this.state.compositeDisplay,getResult:this.getAssignUser,cancel:this.compositeTurnOff}),c.default.createElement(T,{show:this.state.showApproveDetail,billtype:S.BILL_TYPE_CODE,billid:this.state.billId,close:function(){t.setState({showApproveDetail:!1})}}))}}]),e}(),n=function(){var t=this;this.handlePageInfoChange=function(e,a,o){(0,_.pageInfoClick)(s({},e,{json:t.state.json}),a,o)},this.onRowDoubleClick=function(e,a,o){(0,_.handleDoubleClick)(e,a,s({},o,{json:t.state.json}))},this.clickSearchBtn=function(e){(0,T.searchBtnClick)(s({},e,{json:t.state.json}))},this.clickSelectBtn=function(t,e,a,o,n){(0,f.selectedEvent)(t,e,a,o,n)},this.clickSelectAllBtn=function(t,e,a,o){(0,f.selectedAllEvent)(t,e,a,o)},this.getAssignUser=function(e){(0,_.listCommit)(s({},t.props,{json:t.state.json}),{pks:t.state.curPk,userObj:e}),t.compositeTurnOff()},this.compositeTurnOff=function(){t.setState({compositeData:null,compositeDisplay:!1})}},o);h=(0,u.createPage)({})(h),e.default=h},34:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initTemplate=function(t){var e=this;t.createUIDom({pagecode:o.LIST.page_code},function(a){if(a){if(a.button){var r=a.button;t.button.setButtons(r),t.button.setPopContent(o.LIST_BUTTON.bodyDelete,e.state.json["91H10510-000008"]),t.button.setButtonDisabled(o.LIST_DISABLED_BUTTON,!0)}if(a.template){var s=a.template;if(s=function(t,e){var a=this;return e[o.LIST.search_id].items.map(function(e){e.attrcode===o.FIELD.org&&(e.isMultiSelectedEnabled=!0,e.queryCondition=function(){return{funcode:t.getSearchParam("c")}})}),e[o.LIST.table_id].pagination=!0,e[o.LIST.table_id].items=e[o.LIST.table_id].items.map(function(e,a){return e.attrcode==o.PRIMARY_KEY.bill_no&&(e.render=function(e,a,n){return React.createElement("a",{style:{cursor:"pointer"},onClick:function(){t.pushTo(o.REQUEST_URL.toCard,{status:o.STATUS.browse,id:a[o.PRIMARY_KEY.head_id].value,pagecode:o.CARD.page_code})}},a[o.PRIMARY_KEY.bill_no]&&a[o.PRIMARY_KEY.bill_no].value)}),e}),e[o.LIST.table_id].items.push({itemtype:"customer",attrcode:"opr",label:this.state.json["91H10510-000006"],width:"180px",fixed:"right",className:"table-opr",visible:!0,render:function(e,r,s){var i=[];switch(r[o.FIELD.billStatus]&&r[o.FIELD.billStatus].value){case o.STATUS.NOSTATE:i=[o.LIST_BUTTON.bodyCommit,o.LIST_BUTTON.bodyUpdate,o.LIST_BUTTON.bodyDelete,o.LIST_BUTTON.copy];break;case o.STATUS.PASSING:case o.STATUS.COMMIT:case o.STATUS.GOINGON:i=[o.LIST_BUTTON.bodyUnCommit,o.LIST_BUTTON.copy];break;default:i=[o.LIST_BUTTON.copy]}return t.button.createOprationButton(i,{area:o.LIST.body_btn_code,buttonLimit:4,onButtonClick:function(t,o){return n.bodyButtonClick.call(a,t,o,e,r,s)}})}}),e}.call(e,t,s),a.context&&a.context.pk_org){var i=a.context,l=i.pk_org,c=i.org_Name;s[o.LIST.search_id].items.map(function(t){t.attrcode==o.FIELD.org&&(t.initialvalue={display:c,value:l})})}if(t.meta.setMeta(s),a.context&&a.context.pk_org){var u=t.search.getSearchValByField(o.LIST.search_id,o.FIELD.org);if(!u||!u.value){var d=a.context,p=d.pk_org,T=d.org_Name;t.search.setSearchValByField(o.LIST.search_id,o.FIELD.org,{display:T,value:p})}}}}})};var o=a(1),n=a(35)},35:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t};e.bodyButtonClick=function(t,e,a,s,i){var l=s[n.PRIMARY_KEY.head_id]&&s[n.PRIMARY_KEY.head_id].value,c=s[n.FIELD.ts]&&s[n.FIELD.ts].value,u=new Map;l&&c&&u.set(l,c);switch(e){case n.LIST_BUTTON.bodyUpdate:(0,r.listEdit)(t,l);break;case n.LIST_BUTTON.bodyDelete:(0,r.listBodyDelete)(o({},t,{json:this.state.json}),{pks:[l],pkMapTs:u},i);break;case n.LIST_BUTTON.copy:(0,r.listCopy)(t,l);break;case n.LIST_BUTTON.bodyCommit:r.listCommit.call(this,o({},t,{json:this.state.json}),{pks:[l],pkMapTs:u});break;case n.LIST_BUTTON.bodyUnCommit:(0,r.listUnCommit)(o({},t,{json:this.state.json}),{pks:[l],pkMapTs:u})}};var n=a(1),r=a(6)},36:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t};e.buttonClick=function(t,e,a,i,l){var c=this;switch(e){case s.LIST_BUTTON.create:(0,r.listCreate)(t);break;case s.LIST_BUTTON.delete:(0,n.promptBox)({color:s.STATUS.warning,title:this.state.json["91H10510-000000"],content:this.state.json["91H10510-000001"],beSureBtnClick:function(){(0,r.listHeadDelete)(o({},t,{json:c.state.json}))}});break;case s.LIST_BUTTON.attachment:r.listAttachment.call(this,o({},t,{json:this.state.json}));break;case s.LIST_BUTTON.billTrack:r.listBillTrack.call(this,o({},t,{json:this.state.json}));break;case s.LIST_BUTTON.approvalLink:r.listLinkApprove.call(this,o({},t,{json:this.state.json}));break;case s.LIST_BUTTON.commit:r.listCommit.call(this,o({},t,{json:this.state.json}));break;case s.LIST_BUTTON.unCommit:(0,r.listUnCommit)(o({},t,{json:this.state.json}));break;case s.LIST_BUTTON.refresh:(0,r.listRefresh)(o({},t,{json:this.state.json}))}};var n=a(0),r=a(6),s=a(1)},37:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.searchBtnClick=function(t){(0,o.listSearch)(t)};var o=a(6)},38:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.selectedEvent=function(t,e,a,n,r){t.button.setButtonDisabled(o.LIST_DISABLED_BUTTON,!0);var s=[],i=!0,l=!0,c=!0,u=t.table.getCheckedRows(o.LIST.table_id);if(0==u.length)return;if(u.length>1){s=[o.LIST_BUTTON.print,o.LIST_BUTTON.output];var d=!0,p=!1,T=void 0;try{for(var f,S=u[Symbol.iterator]();!(d=(f=S.next()).done);d=!0){var _=f.value,b=_.data.values[o.FIELD.billStatus].value;b==o.STATUS.PASSING||b==o.STATUS.COMMIT||b==o.STATUS.GOINGON?(l=!1,i=!1):b==o.STATUS.NOSTATE&&(c=!1)}}catch(t){p=!0,T=t}finally{try{!d&&S.return&&S.return()}finally{if(p)throw T}}i&&s.push(o.LIST_BUTTON.delete),l&&s.push(o.LIST_BUTTON.commit),c&&s.push(o.LIST_BUTTON.unCommit),t.button.setButtonDisabled(s,!1)}else{var h=u[0].data.values[o.FIELD.billStatus]&&u[0].data.values[o.FIELD.billStatus].value;h==o.STATUS.NOSTATE?s=[o.LIST_BUTTON.commit,o.LIST_BUTTON.delete]:h!=o.STATUS.PASSING&&h!=o.STATUS.COMMIT&&h!=o.STATUS.GOINGON||(s=[o.LIST_BUTTON.unCommit,o.LIST_BUTTON.approvalLink]),t.button.setButtonDisabled([].concat(function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(s),[o.LIST_BUTTON.print,o.LIST_BUTTON.output,o.LIST_BUTTON.attachment,o.LIST_BUTTON.linkGroup,o.LIST_BUTTON.billTrack]),!1)}},e.selectedAllEvent=function(t,e,a,n){if(t.button.setButtonDisabled(o.LIST_DISABLED_BUTTON,!0),t.table.getCheckedRows(o.LIST.table_id).length>0){var r=[],s=!0,i=!0,l=!0,c=t.table.getCheckedRows(o.LIST.table_id);r=[o.LIST_BUTTON.print,o.LIST_BUTTON.output];var u=!0,d=!1,p=void 0;try{for(var T,f=c[Symbol.iterator]();!(u=(T=f.next()).done);u=!0){var S=T.value,_=S.data.values[o.FIELD.billStatus].value;_==o.STATUS.PASSING||_==o.STATUS.COMMIT||_==o.STATUS.GOINGON?(i=!1,s=!1):_==o.STATUS.NOSTATE&&(l=!1)}}catch(t){d=!0,p=t}finally{try{!u&&f.return&&f.return()}finally{if(d)throw p}}s&&r.push(o.LIST_BUTTON.delete),i&&r.push(o.LIST_BUTTON.commit),l&&r.push(o.LIST_BUTTON.unCommit),t.button.setButtonDisabled(r,!1)}};var o=a(1)},5:function(t,a){t.exports=e},6:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.listCreate=function(t){t.pushTo(n.REQUEST_URL.toCard,{status:n.STATUS.add,pagecode:n.CARD.page_code})},e.listRefresh=r,e.listEdit=function(t,e){t.pushTo(n.REQUEST_URL.toCard,{status:n.STATUS.edit,id:e,pagecode:n.CARD.page_code})},e.listCopy=function(t,e){t.pushTo(n.REQUEST_URL.toCard,{status:n.STATUS.edit,id:e,pagecode:n.CARD.page_code,isCopy:!0})},e.listCommit=function(t,e){var a=this;if(!e){var i=s(t,!1);if(!i.valid)return;if(i.valid){var c=i.selectDatas,u=c&&c.map(function(t){return t.data.values[n.PRIMARY_KEY.head_id].value}),d=new Map;c&&c.map(function(t){var e=t.data.values[n.PRIMARY_KEY.head_id].value,a=t.data.values[n.FIELD.ts]&&t.data.values[n.FIELD.ts].value;e&&a&&d.set(e,a)}),e={pks:u,pkMapTs:d}}}(0,o.ajax)({url:n.REQUEST_URL.commit,data:e,success:function(o){o.success?o.data&&o.data.workflow&&("approveflow"==o.data.workflow||"workflow"==o.data.workflow)?(a.setState({compositeData:o.data,compositeDisplay:!0,curPk:e.pks}),l.call(a,o)):(l.call(a,o),r(t)):l.call(a,o)}})},e.listUnCommit=function(t,e){if(!e){var a=s(t,!1);if(a.valid){var i=a.selectDatas,l=i&&i.map(function(t){return t.data.values[n.PRIMARY_KEY.head_id].value}),c=new Map;i&&i.map(function(t){var e=t.data.values[n.PRIMARY_KEY.head_id].value,a=t.data.values[n.FIELD.ts]&&t.data.values[n.FIELD.ts].value;e&&a&&c.set(e,a)}),e={pks:l,pkMapTs:c}}}(0,o.ajax)({url:n.REQUEST_URL.unCommit,data:e,success:function(e){e.success?r(t):(0,o.toast)({color:n.STATUS.warning,content:t.json["91H10510-000017"]})}})},e.checkSelected=s,e.listAttachment=function(t){var e=s(t,!0);if(e.valid){var a=e.selectDatas,o=a[0]&&a[0].data.values[n.PRIMARY_KEY.head_id].value,r=a[0]&&a[0].data.values[n.PRIMARY_KEY.bill_no].value;this.setState({showUploader:!this.state.showUploader,billInfo:{billId:o,billNo:r}})}},e.listBillTrack=function(t){var e=s(t,!0);if(e.valid){var a=e.selectDatas,o=a[0]&&a[0].data.values[n.PRIMARY_KEY.head_id].value;this.setState({showBillTrack:!0,billTrackBillId:o,billTrackBillType:n.BILL_TYPE_CODE})}},e.listLinkApprove=function(t){var e=s(t,!0);if(e.valid){var a=e.selectDatas,o=a[0]&&a[0].data.values[n.PRIMARY_KEY.head_id].value;this.setState({showApproveDetail:!0,billId:o})}},e.listHeadDelete=function(t){var e={},a=[],r=s(t,!1);if(r.valid){var i=r.selectDatas;a=i&&i.map(function(t){return t.data.values[n.PRIMARY_KEY.head_id].value});var l=new Map;i&&i.map(function(t){var e=t.data.values[n.PRIMARY_KEY.head_id].value,a=t.data.values[n.FIELD.ts]&&t.data.values[n.FIELD.ts].value;e&&a&&l.set(e,a)}),e={pks:a,pkMapTs:l}}(0,o.ajax)({url:n.REQUEST_URL.delete,data:e,success:function(e){if(e.success){var r=t.table.getAllTableData(n.LIST.table_id),s=r.rows[0]&&r.rows.map(function(t){return t.values[n.PRIMARY_KEY.head_id].value}),i=a.map(function(t){return s.findIndex(function(e){return e==t})}).filter(function(t){return-1!=t});t.table.deleteCacheId(n.LIST.table_id,a),t.table.deleteTableRowsByIndex(n.LIST.table_id,i),(0,o.toast)({color:n.STATUS.success,content:t.json["91H10510-000005"]})}else(0,o.toast)({color:n.STATUS.warning,content:t.json["91H10510-000009"]})}})},e.listBodyDelete=function(t,e,a){(0,o.ajax)({url:n.REQUEST_URL.delete,data:e,success:function(r){r.success?(t.table.deleteCacheId(n.LIST.table_id,e.pks[0]),t.table.deleteTableRowsByIndex(n.LIST.table_id,a),(0,o.toast)({color:n.STATUS.success,content:t.json["91H10510-000005"]})):(0,o.toast)({color:n.STATUS.warning,content:t.json["91H10510-000009"]})}})},e.listSearch=i,e.pageInfoClick=function(t,e,a){var r={pks:a,pagecode:n.LIST.page_code};(0,o.ajax)({url:n.REQUEST_URL.queryListByPks,data:r,success:function(e){var a=e.success,r=e.data;a&&r&&r[n.LIST.table_id]?(t.table.setAllTableData(n.LIST.table_id,r[n.LIST.table_id]),(0,o.toast)({color:n.STATUS.success})):(t.table.setAllTableData(n.LIST.table_id,{rows:[]}),(0,o.toast)({color:n.STATUS.warning,content:t.json["91H10510-000010"]}))}})},e.PromptMessage=l,e.handleDoubleClick=function(t,e,a){a.pushTo(n.REQUEST_URL.toCard,{status:n.STATUS.browse,id:t[n.PRIMARY_KEY.head_id].value,pagecode:n.CARD.page_code,scene:a.getUrlParam("scene")})};var o=a(0),n=a(1);function r(t){i(t,(0,o.cardCache.getDefData)(n.SEARCH_CACHE.key,n.SEARCH_CACHE.dataSource))}function s(t,e){var a=!0,r=t.table&&t.table.getCheckedRows(n.LIST.table_id);return e&&r.length>1?((0,o.toast)({color:n.STATUS.warning,content:t.json["91H10510-000012"]}),a=!1):0==r.length&&((0,o.toast)({color:n.STATUS.warning,content:t.json["91H10510-000013"]}),a=!1),{valid:a,selectDatas:r}}function i(t,e){var a,r,s,i=t.table.getTablePageInfo(n.LIST.table_id);e||(e=t.search.getQueryInfo(n.LIST.search_id)),e.pageInfo=i,e.pageCode=n.LIST.page_code,t.button.setDisabled((a={},r=n.LIST_BUTTON.refresh,s=!1,r in a?Object.defineProperty(a,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[r]=s,a)),(0,o.ajax)({url:n.REQUEST_URL.queryList,data:e,success:function(a){var r=a.success,s=a.data;a.formulamsg&&a.formulamsg instanceof Array&&a.formulamsg.length>0&&t.dealFormulamsg(a.formulamsg),r&&s&&s[n.LIST.table_id]?(t.table.setAllTableData(n.LIST.table_id,s[n.LIST.table_id]),(0,o.toast)({color:n.STATUS.success})):(t.table.setAllTableData(n.LIST.table_id,{rows:[]}),(0,o.toast)({color:n.STATUS.warning,content:t.json["91H10510-000010"]})),(0,o.cardCache.setDefData)(n.SEARCH_CACHE.key,n.SEARCH_CACHE.dataSource,e)}})}function l(t){var e=t.data,a=e.status,n=e.msg,r=void 0;r=(r=(r="共提交"+t.data.total+"条")+",成功"+t.data.successNum+"条")+",失败"+t.data.failNum+",条";var s=t.data.errormessages;0==a?(0,o.toast)({color:"success",title:"提交"+n,content:r,TextArr:["展开","收起","关闭"],groupOperation:!0}):1==a?(0,o.toast)({duration:"infinity",color:"danger",title:"提交"+n,content:r,TextArr:["展开","收起","关闭"],groupOperation:!0,groupOperationMsg:s}):2==a&&(0,o.toast)({duration:"infinity",color:"warning",title:"提交"+n,content:r,TextArr:["展开","收起","关闭"],groupOperation:!0,groupOperationMsg:s})}},80:function(t,e,a){t.exports=a(33)}})});